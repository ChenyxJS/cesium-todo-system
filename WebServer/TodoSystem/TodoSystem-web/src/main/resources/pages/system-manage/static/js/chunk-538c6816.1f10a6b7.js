(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-538c6816"],{"072a":function(e,t,r){"use strict";r.d(t,"d",(function(){return a})),r.d(t,"e",(function(){return s})),r.d(t,"b",(function(){return i})),r.d(t,"f",(function(){return l})),r.d(t,"g",(function(){return n})),r.d(t,"c",(function(){return c})),r.d(t,"a",(function(){return u}));var o=r("b775");function a(e){return Object(o["a"])({url:"/admin/schoolDorm/selectByQuery",method:"post",data:e})}function s(e){return Object(o["a"])({url:"/admin/schoolDorm/selectDormTree",method:"post",data:e})}function i(e){return Object(o["a"])({url:"/admin/schoolDorm/exportExcel",method:"post",data:e})}function l(e){return Object(o["a"])({url:"/admin/schoolDorm/addSchoolDorm",method:"post",data:e})}function n(e){return Object(o["a"])({url:"/admin/schoolDorm/updateSchoolDorm",method:"post",data:e})}function c(e){return Object(o["a"])({url:"/admin/schoolDorm/selectDormTree",method:"post",data:e})}function u(e){return Object(o["a"])({url:"/admin/schoolDorm/deleteSchoolDorm",method:"post",data:e})}},"32c9":function(e,t,r){},"349c":function(e,t,r){"use strict";r.d(t,"d",(function(){return a})),r.d(t,"c",(function(){return s})),r.d(t,"b",(function(){return i})),r.d(t,"e",(function(){return l})),r.d(t,"f",(function(){return n})),r.d(t,"a",(function(){return c}));var o=r("b775");function a(e){return Object(o["a"])({url:"/admin/organization/selectByQuery",method:"post",data:e})}function s(e){return Object(o["a"])({url:"/admin/organization/selectOrgByQuery",method:"post",data:e})}function i(e){return Object(o["a"])({url:"/admin/organization/exportExcel",method:"post",data:e})}function l(e){return Object(o["a"])({url:"/admin/organization/addOrgnization",method:"post",data:e})}function n(e){return Object(o["a"])({url:"/admin/organization/updateOrgnization",method:"post",data:e})}function c(e){return Object(o["a"])({url:"/admin/organization/deleteOrgnization",method:"post",data:e})}},"353a":function(e,t,r){"use strict";r.r(t);var o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-dialog",{attrs:{title:e.dialogTitle,visible:e.isVisible,width:"60%",top:"4vh","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.isVisible=t}}},[r("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"auto"}},[r("el-form-item",{attrs:{label:"添加原因：",prop:"reason"}},[r("el-input",{attrs:{placeholder:"请输入原因",type:"textarea"},model:{value:e.form.reason,callback:function(t){e.$set(e.form,"reason",t)},expression:"form.reason"}})],1),r("el-form-item",{attrs:{label:"角色名称",prop:"roleId"}},[r("el-select",{attrs:{placeholder:"请选择角色"},on:{focus:e.getRoleList},model:{value:e.form.roleId,callback:function(t){e.$set(e.form,"roleId",t)},expression:"form.roleId"}},e._l(e.roleList,(function(e){return r("el-option",{key:e.roleId,attrs:{label:e.roleName,value:e.roleId}})})),1)],1)],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("取 消")]),r("el-button",{directives:[{name:"loading",rawName:"v-loading",value:e.submitting,expression:"submitting"}],attrs:{type:"primary",disabled:e.submitting},on:{click:function(t){return e.submitClick()}}},[e._v("确 定")])],1)],1)],1)},a=[],s=r("1da1"),i=(r("96cf"),r("ad78")),l=r("c633"),n=r("f46a"),c={name:"EditRoleDialog",mixins:[i["a"]],props:{entity:{type:Object}},created:function(){this.getRoleList()},data:function(){return{submitting:!1,form:{userId:"",reason:"",roleId:""},rules:{reason:[{required:!0,message:"不能为空！",trigger:"blur"}],roleId:[{required:!0,message:"请选择！",trigger:"blur"}]},roleList:[]}},watch:{entity:function(e){e&&e.userId&&(this.form.userId=e.userId)}},computed:{isEdit:function(){return this.entity&&this.entity.userId},dialogTitle:function(){return this.isEdit?"添加角色":"添加"}},methods:{submitClick:function(){var e=this;this.$refs.form.validate((function(t){if(t){var r=e.form;e.submitting=!0,(e.isEdit?Object(l["a"])(r):insertTeacher(r)).then((function(t){e.submitting=!1,t.success?(e.$refs["form"].resetFields(),e.$notify({title:"成功",message:"操作成功",type:"success"}),e.$emit("change"),e.isVisible=!1):e.$notify.error({title:"失败",message:t.failReasonShow||"操作失败"})}))}}))},getRoleList:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var r,o,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(n["d"])({"param.roleType":3});case 2:r=t.sent,o=r.success,a=r.root,o&&(e.roleList=a);case 6:case"end":return t.stop()}}),t)})))()}}},u=c,d=(r("cc0e"),r("2877")),m=Object(d["a"])(u,o,a,!1,null,"16a7f616",null);t["default"]=m.exports},"584b":function(e,t,r){"use strict";r.r(t);var o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"list-view-layout"},[r("json-filter",{attrs:{code:e.titleCode}},[r("el-form",{attrs:{inline:!0}},[r("el-form-item",{attrs:{label:"职务"}},[r("el-input",{attrs:{placeholder:"请输入",clearable:""},model:{value:e.param.position,callback:function(t){e.$set(e.param,"position",t)},expression:"param.position "}})],1),r("el-form-item",{attrs:{label:"姓名"}},[r("el-input",{attrs:{placeholder:"请输入",clearable:""},model:{value:e.param.userNameIsLike,callback:function(t){e.$set(e.param,"userNameIsLike",t)},expression:"param.userNameIsLike"}})],1),r("el-form-item",{attrs:{label:"手机号"}},[r("el-input",{attrs:{placeholder:"请输入",clearable:""},model:{value:e.param.userPhone,callback:function(t){e.$set(e.param,"userPhone",t)},expression:"param.userPhone"}})],1),r("el-form-item",{attrs:{label:"责任范围"}},[r("el-input",{attrs:{placeholder:"请输入",clearable:""},model:{value:e.param.dutyRangeIsLike,callback:function(t){e.$set(e.param,"dutyRangeIsLike",t)},expression:"param.dutyRangeIsLike"}})],1),r("el-form-item",{attrs:{label:"学校码"}},[r("el-input",{attrs:{placeholder:"请输入",clearable:""},model:{value:e.param.schoolCode,callback:function(t){e.$set(e.param,"schoolCode",t)},expression:"param.schoolCode"}})],1),r("el-form-item",{attrs:{label:"学校名称"}},[r("el-input",{attrs:{placeholder:"请输入",clearable:""},model:{value:e.param.schoolName,callback:function(t){e.$set(e.param,"schoolName",t)},expression:"param.schoolName"}})],1),r("el-form-item",[r("el-button",{on:{click:function(t){return e.doSearch()}}},[e._v("查询")]),r("permission-filter",{attrs:{code:"userTeacherAdd",type:"primary"},nativeOn:{click:function(t){return e.doAdd(t)}}}),r("permission-filter",{attrs:{code:"userTeacherImport",type:"primary"},nativeOn:{click:function(t){return e.doImport(t)}}}),r("permission-filter",{attrs:{code:"userTeacherExport",type:"primary"},nativeOn:{click:function(t){return e.doExport(t)}}})],1)],1)],1),r("json-table",{ref:"myJsonTable",attrs:{"table-heads":e.tableHeads,loading:e.listLoading,"table-data":e.tableData,page:e.page},on:{"current-change":e.currentPageChange},scopedSlots:e._u([{key:"substituteClassList",fn:function(t){return[r("el-popover",{attrs:{placement:"right",trigger:"click"}},[r("el-table",{attrs:{data:t.rowData.scope.row.substituteClassList,border:""}},[r("el-table-column",{attrs:{width:"150",property:"scclLevel","show-overflow-tooltip":"",label:"学校",align:"center"}}),r("el-table-column",{attrs:{width:"150",property:"scclYear","show-overflow-tooltip":"",label:"年级",align:"center"}}),r("el-table-column",{attrs:{width:"150",property:"scclName","show-overflow-tooltip":"",label:"班级",align:"center"}})],1),r("el-button",{attrs:{slot:"reference",size:"medium",type:"text"},slot:"reference"},[e._v("查看")])],1)]}},{key:"schoolDormList",fn:function(t){return[r("el-popover",{attrs:{placement:"right",width:"400",trigger:"click"}},[r("el-table",{attrs:{data:t.rowData.scope.row.schoolDormList,border:""}},[r("el-table-column",{attrs:{width:"150",property:"scdoBuildNumber","show-overflow-tooltip":"",label:"宿舍楼号",align:"center"}}),r("el-table-column",{attrs:{property:"scdoBuildUnit","show-overflow-tooltip":"",label:"宿舍单元",align:"center"}}),r("el-table-column",{attrs:{property:"scdoBuildFloor","show-overflow-tooltip":"",label:"宿舍楼层",align:"center"}}),r("el-table-column",{attrs:{property:"scdoCode","show-overflow-tooltip":"",label:"宿舍单元",align:"center"}})],1),r("el-button",{attrs:{slot:"reference",size:"medium",type:"text"},slot:"reference"},[e._v("查看")])],1)]}},{key:"dutyClassNameList",fn:function(t){return[r("el-popover",{attrs:{placement:"right",width:"400",trigger:"click"}},[r("el-table",{attrs:{data:t.rowData.scope.row.dutyClassNameList,border:""}},[r("el-table-column",{attrs:{width:"150",property:"scclOrgName","show-overflow-tooltip":"",label:"学校",align:"center"}}),r("el-table-column",{attrs:{width:"150",property:"scclYear","show-overflow-tooltip":"",label:"年级",align:"center"}}),r("el-table-column",{attrs:{width:"150",property:"scclName","show-overflow-tooltip":"",label:"班级",align:"center"}})],1),r("el-button",{attrs:{slot:"reference",size:"medium",type:"text"},slot:"reference"},[e._v("查看")])],1)]}},{key:"roleList",fn:function(t){return[r("el-popover",{attrs:{placement:"right",trigger:"click"}},[r("el-table",{attrs:{data:t.rowData.scope.row.roleList}},[r("el-table-column",{attrs:{width:"100",property:"roleName","show-overflow-tooltip":"",label:"角色名"}}),r("el-table-column",{attrs:{property:"roleName",width:"200","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(o){return[r("permission-filter",{attrs:{code:"userTeacherAdjust",size:"mini",type:"primary"},nativeOn:{click:function(r){return e.doAdjust(t.rowData.scope.row,o.row)}}}),r("permission-filter",{attrs:{code:"userTeacherDelete",size:"mini",type:"danger"},nativeOn:{click:function(r){return e.doDelete(t.rowData.scope.row,o.row.roleId)}}})]}}],null,!0)})],1),r("el-button",{attrs:{slot:"reference",size:"medium",type:"text"},slot:"reference"},[e._v("查看")])],1)]}},{key:"operations",fn:function(t){return[r("permission-filter",{attrs:{code:"userTeacherEdit",size:"mini",type:"warning"},nativeOn:{click:function(r){return e.doEdit(t.rowData.scope.row)}}}),r("permission-filter",{attrs:{code:"userTeacherEditRole",size:"mini",type:"primary"},nativeOn:{click:function(r){return e.doEditRole(t.rowData.scope.row)}}})]}}])}),r("edit-dialog",{attrs:{entity:e.chooseEntity},on:{change:function(t){return e.handleChange()}},model:{value:e.dialogShow,callback:function(t){e.dialogShow=t},expression:"dialogShow"}}),r("edit-role-dialog",{attrs:{entity:e.chooseEntity},on:{change:function(t){return e.handleChange()}},model:{value:e.dialogShowRole,callback:function(t){e.dialogShowRole=t},expression:"dialogShowRole"}}),r("adjust-dialog",{attrs:{entity:e.chooseEntity,entityRole:e.chooseEntityRole},on:{change:function(t){return e.handleChange()}},model:{value:e.adjustDialogShow,callback:function(t){e.adjustDialogShow=t},expression:"adjustDialogShow"}}),r("import-dialog",{attrs:{title:"Excel文件导入",url:"/admin/teacherStaff/importExcel",template:"/template/user-teacher.xlsx",formats:["xls","xlsx"]},on:{change:function(t){return e.doSearch()}},model:{value:e.importDialogShow,callback:function(t){e.importDialogShow=t},expression:"importDialogShow"}})],1)},a=[],s=r("5530"),i=(r("159b"),r("a15b"),r("4303")),l=r("261a"),n=r("e101"),c=r("ebd4"),u=r("4f29"),d=r("d07f"),m=r("353a"),f=r("c633"),p={components:{JsonFilter:i["a"],JsonTable:l["a"],PermissionFilter:n["a"],EditDialog:c["default"],ImportDialog:u["a"],AdjustDialog:d["default"],EditRoleDialog:m["default"]},data:function(){return{titleCode:"userTeacher",tableHeads:[{prop:"userRealName",label:"姓名"},{prop:"userPhone",label:"手机号"},{slot:!0,prop:"roleList",label:"职务"},{prop:"schoolName",label:"学校"},{slot:!0,prop:"dutyClassNameList",label:"责任班级"},{slot:!0,prop:"schoolDormList",label:"管理宿舍"},{slot:!0,prop:"substituteClassList",label:"代课班级"},{slot:!0,fixed:"right",prop:"operations",label:"操作",width:180}],listLoading:!1,tableData:[],param:{position:"",userNameIsLike:"",userPhone:"",dutyRangeIsLike:"",schoolCode:"",schoolName:""},page:{limit:15,current:1,total:15},dialogShow:!1,chooseEntity:null,chooseEntityRole:null,importDialogShow:!1,exportLoading:!1,adjustDialogShow:!1,dialogShowRole:!1}},computed:{},created:function(){this.getTableData()},methods:{getTableData:function(){var e=this;this.listLoading=!0,Object(f["e"])(Object(s["a"])(Object(s["a"])({},this.param),{},{page:this.page.current,limit:this.page.limit})).then((function(t){e.listLoading=!1,t.success?(t.root.forEach((function(e){e.substituteClass&&(e.substituteClass=e.substituteClass.join(",")),e.dormNumber&&(e.dormNumber=e.dormNumber.join(","))})),e.tableData=t.root,e.page.total=t.totalSize):(e.tableData=[],e.page.total=0,e.$notify({title:"提示",message:t.failReasonShow||"未获取到数据",type:"warning"}))}))},currentPageChange:function(e){this.page.current=e,this.getTableData()},doSearch:function(){this.page.current=1,this.getTableData()},handleChange:function(){this.getTableData()},doAdd:function(){this.chooseEntity=null===this.chooseEntity?{}:null,this.dialogShow=!0},doDelete:function(e,t){var r=this;this.$confirm("确定删除？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",beforeClose:function(o,a,s){"confirm"===o?Object(f["c"])({teacherId:e.userId,roleId:t}).then((function(e){e.success?(r.$notify({title:"成功",message:"操作成功!",type:"success"}),r.getTableData()):r.$notify.error({title:"失败",message:e.failReasonShow||"操作失败"}),s()})).catch((function(e){r.$notify.error({title:"失败",message:"请求发生错误， 请重试"}),s()})):s()}})},doEdit:function(e){this.chooseEntity=e,e.uniquelyIdentifies=(new Date).getTime(),this.dialogShow=!0},doEditRole:function(e){this.chooseEntity=e,e.uniquelyIdentifies=(new Date).getTime(),this.dialogShowRole=!0},doAdjust:function(e,t){this.chooseEntity=e,this.chooseEntityRole=t,e.uniquelyIdentifies=(new Date).getTime(),this.adjustDialogShow=!0},doImport:function(){this.importDialogShow=!0},doExport:function(){var e=this;this.exportLoading||(this.exportLoading=!0,Object(f["d"])(Object(s["a"])(Object(s["a"])({},this.param),{},{isExport:"Y"})).then((function(t){if(e.exportLoading=!1,t.success){var r=e.BASEFILEURL;window.open(r+t.tip)}else e.$notify({title:"提示",message:t.failReasonShow||"Excel 导出错误！",type:"warning"})})))}}},h=p,b=r("2877"),g=Object(b["a"])(h,o,a,!1,null,"3243c729",null);t["default"]=g.exports},6869:function(e,t,r){"use strict";r("32c9")},"6b47":function(e,t,r){},"6dc7":function(e,t,r){"use strict";r("6b47")},"8be8":function(e,t,r){"use strict";r.d(t,"c",(function(){return a})),r.d(t,"d",(function(){return s})),r.d(t,"b",(function(){return i})),r.d(t,"f",(function(){return l})),r.d(t,"h",(function(){return n})),r.d(t,"a",(function(){return c})),r.d(t,"g",(function(){return u})),r.d(t,"e",(function(){return d}));var o=r("b775");function a(e){return Object(o["a"])({url:"/admin/schoolClass/selectByQuery",method:"post",data:e})}function s(e){return Object(o["a"])({url:"/admin/schoolClass/selectYearByOrgId",method:"post",data:e})}function i(e){return Object(o["a"])({url:"/admin/schoolClass/exportExcel",method:"post",data:e})}function l(e){return Object(o["a"])({url:"/admin/schoolClass/addSchoolClass",method:"post",data:e})}function n(e){return Object(o["a"])({url:"/admin/schoolClass/updateSchoolClass",method:"post",data:e})}function c(e){return Object(o["a"])({url:"/admin/schoolClass/deleteSchoolClass",method:"post",data:e})}function u(e){return Object(o["a"])({url:"/admin/schoolClass/selectClassByUserId",method:"post",data:e})}function d(e){return Object(o["a"])({url:"/admin/schoolClass/selectResponsibeByGradeOrClass",method:"post",data:e})}},c633:function(e,t,r){"use strict";r.d(t,"e",(function(){return a})),r.d(t,"d",(function(){return s})),r.d(t,"c",(function(){return i})),r.d(t,"i",(function(){return l})),r.d(t,"h",(function(){return n})),r.d(t,"b",(function(){return c})),r.d(t,"g",(function(){return u})),r.d(t,"f",(function(){return d})),r.d(t,"a",(function(){return m}));var o=r("b775");function a(e){return Object(o["a"])({url:"/admin/teacherStaff/getTeacherStaff",method:"post",data:e})}function s(e){return Object(o["a"])({url:"/admin/teacherStaff/exportExcel",method:"post",data:e})}function i(e){return Object(o["a"])({url:"/admin/teacherStaff/deleteTeacherRole",method:"post",data:e})}function l(e){return Object(o["a"])({url:"/admin/teacherStaff/updateTeacherStaff",method:"post",data:e})}function n(e){return Object(o["a"])({url:"/admin/teacherStaff/addTeacherStaff",method:"post",data:e})}function c(e){return Object(o["a"])({url:"/admin/teacherStaff/adjustPosition",method:"post",data:e})}function u(e){return Object(o["a"])({url:"/admin/teacherStaff/getTeacherStaffRole",method:"post",data:e})}function d(e){return Object(o["a"])({url:"/admin/teacherStaff/selectTeacherByQuery",method:"post",data:e})}function m(e){return Object(o["a"])({url:"/admin/teacherStaff/addTeacherRole",method:"post",data:e})}},cc0e:function(e,t,r){"use strict";r("cfad")},cfad:function(e,t,r){},d07f:function(e,t,r){"use strict";r.r(t);var o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-dialog",{attrs:{title:e.dialogTitle,visible:e.isVisible,width:"50%",top:"4vh","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.isVisible=t}}},[null!==e.entity?r("el-form",{ref:"form",attrs:{model:e.form,"label-width":"auto",rules:e.rules}},[r("el-form-item",{attrs:{label:"机构名称："}},[r("el-input",{attrs:{readonly:""},model:{value:e.entity.schoolName,callback:function(t){e.$set(e.entity,"schoolName",t)},expression:"entity.schoolName"}})],1),r("el-form-item",{attrs:{label:"旧角色："}},[r("el-input",{attrs:{readonly:""},model:{value:e.form.oldRoleName,callback:function(t){e.$set(e.form,"oldRoleName",t)},expression:"form.oldRoleName"}})],1),r("el-form-item",{attrs:{label:"新角色：",prop:"newRoleId"}},[r("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.newRoleId,callback:function(t){e.$set(e.form,"newRoleId",t)},expression:"form.newRoleId"}},e._l(e.roleList,(function(e){return r("el-option",{key:e.roleId,attrs:{label:e.roleName,value:e.roleId}})})),1)],1),r("el-form-item",{attrs:{label:"岗位调整原因：",prop:"reason"}},[r("el-input",{attrs:{type:"textarea",placeholder:"请输入原因："},model:{value:e.form.reason,callback:function(t){e.$set(e.form,"reason",t)},expression:"form.reason"}})],1)],1):e._e(),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{directives:[{name:"loading",rawName:"v-loading",value:e.submitting,expression:"submitting"}],attrs:{type:"primary",disabled:e.submitting},on:{click:function(t){return e.adjust()}}},[e._v("确定")])],1)],1)],1)},a=[],s=r("1da1"),i=r("5530"),l=(r("96cf"),r("ad78")),n=r("c633"),c={name:"AuditDialog",mixins:[l["a"]],props:{entity:{type:Object},entityRole:{type:Object}},data:function(){return{submitting:!1,form:{oldRoleName:"",oldRoleId:"",newRoleId:"",usroOrgId:"",userId:"",roleId:"",reason:""},roleList:[],rules:{reason:[{required:!0,message:"请输入原因",trigger:"change"}],schoolName:[{required:!0,message:"请输入",trigger:"change"}],userPosition:[{required:!0,message:"请输入",trigger:"change"}],newRoleId:[{required:!0,message:"请选择角色",trigger:"change"}]}}},created:function(){this.getTeacherStaffRole()},computed:{dialogTitle:function(){return"岗位调整"}},watch:{entity:function(e){e&&e.userId&&(this.form.userId=e.userId,this.form.oldRoleId=e.roleId,this.form.usroOrgId=e.usroOrgId)},entityRole:function(e){this.form.oldRoleId=e.roleId,this.form.oldRoleName=e.roleName}},methods:{adjust:function(){var e=this;this.$refs.form.validate((function(t){if(t){var r=Object(i["a"])({},e.form);e.submitting=!0,Object(n["b"])(Object(i["a"])({},r)).then((function(t){e.submitting=!1,t.success?(e.$refs["form"].resetFields(),e.$notify({title:"成功",message:"操作成功",type:"success"}),e.$emit("change"),e.isVisible=!1):e.$notify.error({title:"失败",message:t.failReasonShow||"操作失败"})}))}}))},getTeacherStaffRole:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var r,o,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(n["g"])();case 2:r=t.sent,o=r.success,a=r.root,o&&(e.roleList=a);case 6:case"end":return t.stop()}}),t)})))()}}},u=c,d=(r("6dc7"),r("2877")),m=Object(d["a"])(u,o,a,!1,null,"0e46d32a",null);t["default"]=m.exports},d1e5:function(e,t,r){"use strict";r("159b");var o={do:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r={},o=function(o){var a=!0;t.forEach((function(e){e===o&&(a=!1)})),a?r["param.".concat(o)]=e[o]:r[o]=e[o]};for(var a in e)o(a);return r}};t["a"]=o},ebd4:function(e,t,r){"use strict";r.r(t);var o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-dialog",{attrs:{title:e.dialogTitle,visible:e.isVisible,width:"60%",top:"4vh","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.isVisible=t}}},[r("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"auto"}},[r("el-form-item",{attrs:{label:"学校：",prop:"orgId"}},[r("el-select",{attrs:{placeholder:"请选择学校"},on:{focus:e.getSchoolList},model:{value:e.form.orgId,callback:function(t){e.$set(e.form,"orgId",t)},expression:"form.orgId"}},e._l(e.schoolList,(function(e){return r("el-option",{key:e.orgId,attrs:{label:e.orgName,value:e.orgId}})})),1)],1),null==e.isEdit?r("el-form-item",{attrs:{label:"角色名称",prop:"roleId"}},[r("el-select",{attrs:{placeholder:"请选择角色"},on:{focus:e.getRoleList},model:{value:e.form.roleId,callback:function(t){e.$set(e.form,"roleId",t)},expression:"form.roleId"}},e._l(e.roleList,(function(e){return r("el-option",{key:e.roleId,attrs:{label:e.roleName,value:e.roleId}})})),1)],1):e._e(),r("el-form-item",{staticStyle:{width:"100%"},attrs:{label:"密码",prop:e.userPassword}},[r("el-input",{attrs:{placeholder:"请输入"},model:{value:e.form.userPassword,callback:function(t){e.$set(e.form,"userPassword",t)},expression:"form.userPassword"}})],1),r("el-form-item",{staticStyle:{width:"100%"},attrs:{label:"昵称",prop:"userNickName"}},[r("el-input",{attrs:{placeholder:"请输入",disabled:!!e.isEdit},model:{value:e.form.userNickName,callback:function(t){e.$set(e.form,"userNickName",t)},expression:"form.userNickName"}})],1),r("el-form-item",{staticStyle:{width:"100%"},attrs:{label:"姓名",prop:"userRealName"}},[r("el-input",{attrs:{placeholder:"请输入"},model:{value:e.form.userRealName,callback:function(t){e.$set(e.form,"userRealName",t)},expression:"form.userRealName"}})],1),r("el-form-item",{attrs:{label:"性别"}},[r("el-switch",{staticStyle:{"margin-right":"5px"},attrs:{"active-color":"blue","active-value":1,"inactive-color":"pink","inactive-value":2},model:{value:e.form.userSex,callback:function(t){e.$set(e.form,"userSex",t)},expression:"form.userSex"}}),1===e.form.userSex?r("el-tag",{attrs:{size:"small"}},[e._v("男")]):r("el-tag",{attrs:{size:"small",type:"danger"}},[e._v("女")])],1),r("el-form-item",{staticStyle:{width:"100%"},attrs:{label:"手机号",prop:"userPhone"}},[r("el-input",{attrs:{placeholder:"请输入",disabled:!!e.isEdit},model:{value:e.form.userPhone,callback:function(t){e.$set(e.form,"userPhone",t)},expression:"form.userPhone"}})],1),r("el-form-item",{staticStyle:{width:"100%"},attrs:{label:"身份证",prop:"userIdNumber"}},[r("el-input",{attrs:{placeholder:"请输入"},model:{value:e.form.userIdNumber,callback:function(t){e.$set(e.form,"userIdNumber",t)},expression:"form.userIdNumber"}})],1),r("el-form-item",{staticStyle:{width:"100%"},attrs:{label:"省/市/区",prop:e.pcaa}},[r("select-town",{staticStyle:{width:"100%"},attrs:{"is-three-level":!0},on:{getAddress:e.getAddress},model:{value:e.form.pcaa,callback:function(t){e.$set(e.form,"pcaa",t)},expression:"form.pcaa"}})],1),r("el-form-item",{staticStyle:{width:"100%"},attrs:{label:"详细地址",prop:e.userAddress}},[r("el-input",{attrs:{placeholder:"请输入"},model:{value:e.form.userAddress,callback:function(t){e.$set(e.form,"userAddress",t)},expression:"form.userAddress"}})],1),9===this.form.roleId?r("el-form-item",{attrs:{label:"管理年级",prop:"noticeGrade"}},[r("el-select",{attrs:{placeholder:"请选择",multiple:"","collapse-tags":"",disabled:""===this.form.orgId||null===this.form.orgId},on:{focus:e.getGrageList},model:{value:e.form.dutyGradeYear,callback:function(t){e.$set(e.form,"dutyGradeYear",t)},expression:"form.dutyGradeYear"}},e._l(e.gradeList,(function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1):e._e(),12===this.form.roleId?r("el-form-item",{attrs:{label:"责任班级",prop:"strDutyClassId"}},[r("el-select",{attrs:{placeholder:"请选择",multiple:"","collapse-tags":"",disabled:""===this.form.orgId||null===this.form.orgId},on:{focus:e.getClassList},model:{value:e.form.strDutyClassId,callback:function(t){e.$set(e.form,"strDutyClassId",t)},expression:"form.strDutyClassId"}},e._l(e.classList,(function(t){return r("el-option",{key:t.value,attrs:{label:t.label,value:t.value}},[r("span",{staticStyle:{float:"left"}},[e._v(e._s(t.label))]),r("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px"}},[e._v(e._s(t.grade+"级"))])])})),1)],1):e._e(),12===this.form.roleId||14===this.form.roleId?r("el-form-item",{attrs:{label:"代课班级",prop:"substituteClassId"}},[r("el-select",{attrs:{placeholder:"请选择",multiple:"","collapse-tags":"",disabled:""===this.form.orgId||null===this.form.orgId},on:{focus:e.getClassList},model:{value:e.form.substituteClassId,callback:function(t){e.$set(e.form,"substituteClassId",t)},expression:"form.substituteClassId"}},e._l(e.classList,(function(t){return r("el-option",{key:t.value,attrs:{label:t.label,value:t.value}},[r("span",{staticStyle:{float:"left"}},[e._v(e._s(t.label))]),r("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px"}},[e._v(e._s(t.grade+"级"))])])})),1)],1):e._e(),13===this.form.roleId?r("el-form-item",{attrs:{label:"管理宿舍楼",prop:"schoolDormIds"}},[r("el-select",{attrs:{placeholder:"请选择",multiple:"","collapse-tags":"",disabled:(""===this.form.orgId||null===this.form.orgId)&&13===this.form.roleId},on:{focus:e.getDormList},model:{value:e.form.schoolDormIds,callback:function(t){e.$set(e.form,"schoolDormIds",t)},expression:"form.schoolDormIds"}},e._l(e.dormList,(function(e){return r("el-option",{key:e.scdoId,attrs:{label:e.scdoName,value:e.scdoId}})})),1)],1):e._e(),13===this.form.roleId?r("el-form-item",{attrs:{label:"直接责任人："}},[r("el-switch",{staticStyle:{"margin-right":"5px"},attrs:{"active-color":"#33d57b","active-value":1,"inactive-color":"#ff9c9c","inactive-value":0},model:{value:e.form.isDirect,callback:function(t){e.$set(e.form,"isDirect",t)},expression:"form.isDirect"}}),1===e.form.isDirect?r("el-tag",{attrs:{size:"small",type:"success"}},[e._v("是")]):r("el-tag",{attrs:{size:"small",type:"danger"}},[e._v("否")])],1):e._e()],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("取 消")]),r("el-button",{directives:[{name:"loading",rawName:"v-loading",value:e.submitting,expression:"submitting"}],attrs:{type:"primary",disabled:e.submitting},on:{click:function(t){return e.submitClick()}}},[e._v("确 定")])],1)],1)],1)},a=[],s=r("2909"),i=r("1da1"),l=r("5530"),n=(r("96cf"),r("a15b"),r("159b"),r("d3b7"),r("6062"),r("3ca3"),r("ddb0"),r("ad78")),c=r("0eb1"),u=r("c633"),d=r("d1e5"),m=r("61f7"),f=r("f46a"),p=r("349c"),h=r("8be8"),b=r("072a"),g=r("2ef0"),v=r.n(g),y={name:"EditDialog",mixins:[n["a"]],props:{entity:{type:Object}},components:{SelectTown:c["default"]},created:function(){this.getRoleList(),this.getSchoolList()},data:function(){return{submitting:!1,form:{orgId:"",roleId:"",userPassword:"",userNickName:"",userRealName:"",userSex:1,userPhone:"",userIdNumber:"",pcaa:[],userAddress:"",dutyGradeYear:[],classList:[],strDutyClassId:[],substituteClassId:[],schoolDormIds:[],isDirect:1},rules:{userIdNumber:[{required:!0,message:"不能为空！",trigger:"blur"},{validator:m["d"],trigger:"blur"}],userPhone:[{required:!0,message:"不能为空！",trigger:"blur"},{validator:m["e"],trigger:"blur"}],orgId:[{required:!0,message:"不能为空！",trigger:"blur"}],roleId:[{required:!0,message:"不能为空！",trigger:"blur"}],userPassword:[{required:!0,message:"不能为空！",trigger:"blur"}],userNickName:[{required:!0,message:"不能为空！",trigger:"blur"}],userRealName:[{required:!0,message:"不能为空！",trigger:"blur"}],userSex:[{required:!0,message:"不能为空！",trigger:"blur"}],userAddress:[{required:!0,message:"不能为空！",trigger:"blur"}],dutyGradeYear:[{required:!0,message:"不能为空！",trigger:"blur"}],pcaa:[{required:!0,message:"不能为空！",trigger:"blur"}]},roleList:[],schoolList:[],gradeList:[],classList:[],dormList:[]}},watch:{entity:function(e){e&&e.userId?(this.form.userId=e.userId,this.form.orgId=e.usroOrgId,this.form.roleId=e.roleId,this.form.userSex=e.userSex,this.form.userAccount=e.userAccount,this.form.userPassword=e.userPassword,this.form.userRealName=e.userRealName,this.form.userNickName=e.userNickName,this.form.userAddress=e.userAddress,this.form.userPhone=e.userPhone,this.form.userIdNumber=e.userIdNumber,this.form.dutyGradeYear=e.dutyGradeYear||[],this.form.strDutyClassId=e.strDutyClassId||[],this.form.substituteClassId=e.substituteClassId||[],this.form.pcaa=[e.userProvince,e.userCity,e.userArea]):this.form={orgId:"",roleId:"",userPassword:"",userNickName:"",userRealName:"",userSex:1,userPhone:"",userIdNumber:"",pcaa:[],userAddress:"",dutyGradeYear:[],strDutyClassId:[],substituteClassId:[],isDirect:1}}},computed:{isEdit:function(){return this.entity&&this.entity.userId},dialogTitle:function(){return this.isEdit?"编辑":"添加"},userPassword:function(){return this.isEdit?"":"userPassword"},pcaa:function(){return this.isEdit?"":"pcaa"},userAddress:function(){return this.isEdit?"":"userAddress"}},methods:{submitClick:function(){var e=this;this.$refs.form.validate((function(t){if(t){var r=v.a.cloneDeep(e.form);r.dutyGradeYear=r.dutyGradeYear.join(","),r.strDutyClassId=r.strDutyClassId.join(","),r.substituteClassId=r.substituteClassId.join(","),delete r.pcaa;var o=e.isEdit?Object(l["a"])(Object(l["a"])({},d["a"].do(r)),{},{"param.userProvince":e.form.pcaa[0],"param.userCity":e.form.pcaa[1],"param.userArea":e.form.pcaa[2]}):Object(l["a"])(Object(l["a"])({},r),{},{userProvince:e.form.pcaa[0],userCity:e.form.pcaa[1],userArea:e.form.pcaa[2]});e.submitting=!0,(e.isEdit?Object(u["i"])(o):Object(u["h"])(o)).then((function(t){e.submitting=!1,t.success?(e.$refs["form"].resetFields(),e.$notify({title:"成功",message:"操作成功",type:"success"}),e.$emit("change"),e.isVisible=!1):e.$notify.error({title:"失败",message:t.failReasonShow||"操作失败"})}))}}))},getAddress:function(e){this.form.pcaa=e},getRoleList:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r,o,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(f["d"])({"param.roleType":3});case 2:r=t.sent,o=r.success,a=r.root,o&&(e.roleList=a);case 6:case"end":return t.stop()}}),t)})))()},getSchoolList:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r,o,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(p["d"])({page:1,limit:0});case 2:r=t.sent,o=r.success,a=r.root,o&&(e.schoolList=a);case 6:case"end":return t.stop()}}),t)})))()},getGrageList:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r,o,a,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=[],t.next=3,Object(h["c"])({"param.scclOrgId":e.form.orgId,limit:0,page:1});case 3:o=t.sent,o.success,a=o.root,null!=a&&a.forEach((function(e){r.unshift(e.scclYear)})),r=Object(s["a"])(new Set(r)),i=[],r.forEach((function(e){i.push({label:e+"级",value:e})})),e.gradeList=i;case 11:case"end":return t.stop()}}),t)})))()},getClassList:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r,o,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(h["c"])({"param.scclOrgId":e.form.orgId,limit:0,page:1});case 2:r=t.sent,r.success,o=r.root,a=[],o.forEach((function(e){a.push({label:e.scclName,value:e.scclId,grade:e.scclYear})})),e.classList=a;case 8:case"end":return t.stop()}}),t)})))()},getDormList:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r,o,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(b["c"])({scdoOrgId:e.form.orgId});case 2:r=t.sent,o=r.success,a=r.root,o&&(e.dormList=a);case 6:case"end":return t.stop()}}),t)})))()}}},w=y,I=(r("6869"),r("2877")),x=Object(I["a"])(w,o,a,!1,null,"1e2f9a7f",null);t["default"]=x.exports},f46a:function(e,t,r){"use strict";r.d(t,"c",(function(){return a})),r.d(t,"b",(function(){return s})),r.d(t,"e",(function(){return i})),r.d(t,"a",(function(){return l})),r.d(t,"d",(function(){return n}));var o=r("b775");function a(e){return Object(o["a"])({url:"/admin/departmentUser/getDepartmentUser",method:"post",data:e})}function s(e){return Object(o["a"])({url:"/admin/departmentUser/exportExcel",method:"post",data:e})}function i(e){return Object(o["a"])({url:"/admin/departmentUser/updateDepartmentUser",method:"post",data:e})}function l(e){return Object(o["a"])({url:"/admin/departmentUser/addDepartmentUser",method:"post",data:e})}function n(e){return Object(o["a"])({url:"/admin/role/selectByExample",method:"post",data:e})}}}]);