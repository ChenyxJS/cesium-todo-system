(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c654b1ac"],{"23f3":function(t,e,r){"use strict";r.d(e,"a",(function(){return o})),r.d(e,"b",(function(){return i})),r.d(e,"c",(function(){return n})),r.d(e,"d",(function(){return c})),r.d(e,"e",(function(){return s}));var a=r("b775");function o(t){return Object(a["a"])({url:"/admin/article/delete",method:"post",data:t})}function i(t){return Object(a["a"])({url:"/admin/article/selectByArticleDTO",method:"post",data:t})}function n(t){return Object(a["a"])({url:"/admin/article/add",method:"post",data:t})}function c(t){return Object(a["a"])({url:"/admin/article/update",method:"post",data:t})}function s(t){return Object(a["a"])({url:"/admin/article/updateAuditByKey",method:"post",data:t})}},3123:function(t,e,r){"use strict";r.d(e,"b",(function(){return o})),r.d(e,"a",(function(){return i}));var a=r("b775");function o(){return Object(a["a"])({url:"/system/getQiNiuUploadToken",method:"post"})}function i(){var t=["http://up.qiniup.com","https://up.qiniup.com"],e={url:t[0]},r=document.location.protocol;return e.url="https:"===r?t[1]:t[0],e}},"349c":function(t,e,r){"use strict";r.d(e,"c",(function(){return o})),r.d(e,"b",(function(){return i})),r.d(e,"d",(function(){return n})),r.d(e,"e",(function(){return c})),r.d(e,"a",(function(){return s}));var a=r("b775");function o(t){return Object(a["a"])({url:"/admin/organization/selectByQuery",method:"post",data:t})}function i(t){return Object(a["a"])({url:"/admin/organization/exportExcel",method:"post",data:t})}function n(t){return Object(a["a"])({url:"/admin/organization/addOrgnization",method:"post",data:t})}function c(t){return Object(a["a"])({url:"/admin/organization/updateOrgnization",method:"post",data:t})}function s(t){return Object(a["a"])({url:"/admin/organization/deleteOrgnization",method:"post",data:t})}},"840f":function(t,e,r){"use strict";r.d(e,"b",(function(){return o})),r.d(e,"c",(function(){return i})),r.d(e,"d",(function(){return n})),r.d(e,"a",(function(){return c}));var a=r("b775");function o(t){return Object(a["a"])({url:"/admin/carousel/selectByCarouselDTO",method:"post",data:t})}function i(t){return Object(a["a"])({url:"/admin/carousel/add",method:"post",data:t})}function n(t){return Object(a["a"])({url:"/admin/carousel/update",method:"post",data:t})}function c(t){return Object(a["a"])({url:"/admin/carousel/delete",method:"post",data:t})}},"91cc":function(t,e,r){"use strict";r.r(e);var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("el-dialog",{attrs:{title:t.dialogTitle,visible:t.isVisible,width:"50%",top:"3vh","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(e){t.isVisible=e}}},[r("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"学校名称",prop:"caroOrgId"}},[r("el-select",{attrs:{placeholder:"请选择"},on:{focus:t.getSchoolList},model:{value:t.form.caroOrgId,callback:function(e){t.$set(t.form,"caroOrgId",e)},expression:"form.caroOrgId"}},t._l(t.schoolList,(function(t){return r("el-option",{key:t.orgId,attrs:{label:t.orgName,value:t.orgId}})})),1)],1),""!==this.form.caroOrgId?r("el-form-item",{attrs:{label:"类型",prop:"caroType"}},[r("el-select",{attrs:{placeholder:"请选择"},model:{value:t.form.caroType,callback:function(e){t.$set(t.form,"caroType",e)},expression:"form.caroType"}},t._l(t.typeOptions,(function(t){return r("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1):t._e(),2===t.form.caroType?r("el-form-item",{attrs:{label:"链接文章",prop:"caroLinkId"}},[r("el-select",{attrs:{placeholder:"请选择"},on:{focus:t.getArticleList},model:{value:t.form.caroLinkId,callback:function(e){t.$set(t.form,"caroLinkId",e)},expression:"form.caroLinkId"}},t._l(t.articleList,(function(t){return r("el-option",{key:t.articleId,attrs:{label:t.articleTitle,value:t.articleId}})})),1)],1):t._e(),1===t.form.caroType?r("el-form-item",{attrs:{label:"链接地址",prop:"caroLinkAddress"}},[r("el-input",{model:{value:t.form.caroLinkAddress,callback:function(e){t.$set(t.form,"caroLinkAddress",e)},expression:"form.caroLinkAddress"}})],1):t._e(),r("el-form-item",{attrs:{label:"排序",prop:"caroOrderNumber"}},[r("el-input-number",{attrs:{min:0},model:{value:t.form.caroOrderNumber,callback:function(e){t.$set(t.form,"caroOrderNumber",e)},expression:"form.caroOrderNumber"}})],1),r("el-form-item",{attrs:{label:"图片"}},[r("el-upload",{staticClass:"avatar-uploader",attrs:{action:t.actionUrl,data:t.postData,"show-file-list":!1,"on-success":t.handleAvatarSuccess,"on-error":t.handleError,"before-upload":t.beforeAvatarUpload}},[t.imageUrl?r("img",{staticClass:"avatar",attrs:{src:t.imageUrl}}):r("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),r("el-form-item",{attrs:{label:"展示状态",prop:"caroStatus"}},[r("el-switch",{staticStyle:{"margin-right":"5px"},attrs:{"active-color":"#13ce66","active-value":1,"inactive-color":"#909399","inactive-value":0},model:{value:t.form.caroStatus,callback:function(e){t.$set(t.form,"caroStatus",e)},expression:"form.caroStatus"}}),t.form.caroStatus?r("el-tag",{attrs:{size:"small",type:"success"}},[t._v("展示")]):r("el-tag",{attrs:{size:"small",type:"info"}},[t._v("不展示")])],1)],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(e){t.isVisible=!1}}},[t._v("取 消")]),r("el-button",{directives:[{name:"loading",rawName:"v-loading",value:t.submitting,expression:"submitting"}],attrs:{type:"primary",disabled:t.submitting},on:{click:function(e){return t.submitClick()}}},[t._v("确 定")])],1)],1)],1)},o=[],i=r("1da1"),n=r("5530"),c=(r("96cf"),r("159b"),r("b0c0"),r("ad78")),s=r("3123"),l=r("840f"),u=r("349c"),d=r("23f3"),m=r("61f7"),f={name:"EditDialog",mixins:[c["a"]],props:{entity:{type:Object},operatorList:{type:Array}},data:function(){return{submitting:!1,form:{caroId:"",caroOrgId:"",caroImgUrl:"",caroType:0,caroOrderNumber:"",caroStatus:1,caroLinkAddress:"",caroLinkId:""},postData:{token:"",key:""},domain:"",actionUrl:"",imageUrl:"",rules:{caroOrgId:[{required:!0,message:"请输入学校名称！",trigger:"blur"}],articleOrgId:[{required:!0,message:"请输入类型",trigger:"blur"}],caroLinkId:[{required:!0,message:"请选择文章",trigger:"blur"}],caroLinkAddress:[{required:!0,message:"请选择文章",trigger:"blur"},{validator:m["b"],trigger:"blur"}]},typeOptions:[{value:0,label:"纯图"},{value:1,label:"链接"},{value:2,label:"系统文章"}],schoolList:[],articleList:[]}},watch:{entity:function(t){this.imageUrl="",t&&t.caroId?(this.form.caroOrgId=t.caroOrgId,this.form.caroImgUrl=t.caroImgUrl,this.form.caroType=t.caroType,this.form.caroOrderNumber=t.caroOrderNumber,this.form.caroStatus=t.caroStatus,this.form.caroLinkAddress=t.caroLinkAddress,this.form.caroLinkId=t.caroLinkId,this.form.caroId=t.caroId):this.form={caroOrgId:"",caroImgUrl:"",caroType:0,caroOrderNumber:"",caroStatus:1,caroLinkAddress:"",caroLinkId:""}}},computed:{isEdit:function(){return this.entity&&this.entity.caroId},dialogTitle:function(){return this.isVisible&&(this.getHttp(),this.getQiniuConfig()),this.isEdit?"编辑":"添加"}},methods:{getHttp:function(){var t=Object(s["a"])();this.actionUrl=t.url},getQiniuConfig:function(){var t=this;Object(s["b"])().then((function(e){e.success?(t.postData.token=e.tip,e.root.forEach((function(e){"qny_domain"===e.scvaCode&&(t.domain=e.scvaValue||"")}))):t.$notify({title:"提示",message:"上传参数失败！",type:"warning"})}))},handleAvatarSuccess:function(t,e){this.imageUrl=this.domain+"/"+t.key,this.form.caroImgUrl=this.domain+"/"+t.key},handleError:function(t){this.LOG.info(["err --- ",t])},beforeAvatarUpload:function(t){this.postData.key=(new Date).getTime()+t.name;var e="image/jpeg"===t.type,r="image/png"===t.type,a=t.size/1024/1024<5;return e||r||this.$message.error("上传图片只能是 JPG/PNG 格式!"),a||this.$message.error("上传图片大小不能超过 5MB!"),(e||r)&&a},submitClick:function(){var t=this;this.$refs.form.validate((function(e){if(e){var r=Object(n["a"])({},t.form);if(!r.caroImgUrl)return void t.$message.warning("请上传图片！");t.submitting=!0,(t.isEdit?Object(l["d"])(r):Object(l["c"])(r)).then((function(e){t.submitting=!1,e.success?(t.$refs["form"].resetFields(),t.$notify({title:"成功",message:"操作成功",type:"success"}),t.$emit("change"),t.isVisible=!1):t.$notify.error({title:"失败",message:e.failReasonShow||"操作失败"})}))}}))},getSchoolList:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var r,a,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(u["c"])({page:1,limit:0});case 2:r=e.sent,a=r.success,o=r.root,a&&(t.schoolList=o);case 6:case"end":return e.stop()}}),e)})))()},getArticleList:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var r,a,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(d["b"])({articleStatus:1,page:1,limit:0});case 2:r=e.sent,a=r.success,o=r.root,a&&(t.articleList=o);case 6:case"end":return e.stop()}}),e)})))()}}},p=f,g=(r("a4e6"),r("2877")),b=Object(g["a"])(p,a,o,!1,null,"207241c8",null);e["default"]=b.exports},a4e6:function(t,e,r){"use strict";r("e056")},e056:function(t,e,r){},fbbb:function(t,e,r){"use strict";r.r(e);var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"list-view-layout"},[r("json-filter",{attrs:{code:t.titleCode}},[r("el-form",{attrs:{inline:!0}},[r("el-form-item",{attrs:{label:"学校码"}},[r("el-input",{attrs:{placeholder:"请输入",clearable:""},model:{value:t.param.orgCode,callback:function(e){t.$set(t.param,"orgCode",e)},expression:"param.orgCode"}})],1),r("el-form-item",{attrs:{label:"学校名称"}},[r("el-input",{attrs:{placeholder:"请输入",clearable:""},model:{value:t.param.caroOrgName,callback:function(e){t.$set(t.param,"caroOrgName",e)},expression:"param.caroOrgName"}})],1),r("el-form-item",[r("el-button",{on:{click:function(e){return t.doSearch()}}},[t._v("查询")]),r("permission-filter",{attrs:{code:"contentCarouselAdd",type:"primary"},nativeOn:{click:function(e){return t.doAdd()}}})],1)],1)],1),r("json-table",{ref:"myJsonTable",attrs:{"table-heads":t.tableHeads,loading:t.listLoading,"table-data":t.tableData,page:t.page},on:{"current-change":t.currentPageChange},scopedSlots:t._u([{key:"caroImgUrl",fn:function(t){return[r("el-image",{staticStyle:{width:"100px",height:"100px"},attrs:{src:t.rowData.scope.row.caroImgUrl,fit:"contain"}})]}},{key:"caroCreateTime",fn:function(e){return[r("span",[t._v(t._s(t._f("formatDate")(e.rowData.scope.row.caroCreateTime,"yyyy-MM-dd HH:mm:ss")))])]}},{key:"caroType",fn:function(e){return[0===e.rowData.scope.row.caroType?r("el-tag",{attrs:{type:"primary"}},[t._v("纯图")]):t._e(),1===e.rowData.scope.row.caroType?r("el-tag",{attrs:{type:"success"}},[t._v("链接")]):t._e(),2===e.rowData.scope.row.caroType?r("el-tag",{attrs:{type:"danger"}},[t._v("系统文章")]):t._e()]}},{key:"operations",fn:function(e){return[r("permission-filter",{attrs:{code:"contentCarouselEdit",size:"mini",type:"warning"},nativeOn:{click:function(r){return t.doEdit(e.rowData.scope.row)}}}),r("permission-filter",{attrs:{code:"contentCarouselDelete",size:"mini",type:"danger"},nativeOn:{click:function(r){return t.doDelete(e.rowData.scope.row)}}})]}}])}),r("edit-dialog",{attrs:{entity:t.chooseEntity},on:{change:function(e){return t.handleChange()}},model:{value:t.dialogShow,callback:function(e){t.dialogShow=e},expression:"dialogShow"}})],1)},o=[],i=r("5530"),n=r("4303"),c=r("261a"),s=r("e101"),l=r("91cc"),u=r("840f"),d={components:{JsonFilter:n["a"],JsonTable:c["a"],PermissionFilter:s["a"],EditDialog:l["default"]},filters:{},data:function(){return{titleCode:"contentCarousel",tableHeads:[{prop:"orgCode",label:"学校码"},{prop:"caroOrgName",label:"学校名称"},{slot:!0,prop:"caroImgUrl",label:"图片"},{prop:"articleTitle",label:"连接文章"},{prop:"caroLinkAddress",label:"链接地址"},{slot:!0,prop:"caroType",label:"类型"},{prop:"caroOrderNumber",label:"排序"},{slot:!0,prop:"caroCreateTime",label:"创建时间"},{slot:!0,fixed:"right",prop:"operations",label:"操作",width:180}],listLoading:!1,tableData:[],param:{orgCode:"",caroOrgName:""},page:{limit:15,current:1,total:15},dialogShow:!1,chooseEntity:null}},computed:{},created:function(){this.getTableData()},methods:{getTableData:function(){var t=this;this.listLoading=!0,Object(u["b"])(Object(i["a"])(Object(i["a"])({},this.param),{},{page:this.page.current,limit:this.page.limit})).then((function(e){t.listLoading=!1,e.success?(t.tableData=e.root,t.page.total=e.totalSize):(t.tableData=[],t.page.total=0,t.$notify({title:"提示",message:e.failReasonShow||"未获取到数据",type:"warning"}))}))},currentPageChange:function(t){this.page.current=t,this.getTableData()},doSearch:function(){this.page.current=1,this.getTableData()},doDelete:function(t){var e=this;this.$confirm("确定删除？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",beforeClose:function(r,a,o){"confirm"===r?Object(u["a"])({id:t.caroId}).then((function(t){t.success?(e.$notify({title:"成功",message:"操作成功!",type:"success"}),e.getTableData()):e.$notify.error({title:"失败",message:t.failReasonShow||"操作失败"}),o()})).catch((function(t){e.$notify.error({title:"失败",message:"请求发生错误， 请重试"}),o()})):o()}})},handleChange:function(){this.getTableData()},doAdd:function(){this.chooseEntity=null===this.chooseEntity?{}:null,this.dialogShow=!0},doEdit:function(t){this.chooseEntity=t,t.uniquelyIdentifies=(new Date).getTime(),this.dialogShow=!0}}},m=d,f=r("2877"),p=Object(f["a"])(m,a,o,!1,null,"248a071c",null);e["default"]=p.exports}}]);