(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7e23d104"],{"00a2":function(t,e,o){"use strict";o("e349")},"45f3":function(t,e,o){"use strict";o.r(e);var n=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"list-view-layout"},[o("json-filter",{attrs:{code:t.titleCode}},[o("el-form",{attrs:{inline:!0}},[o("el-form-item",{attrs:{label:"学校名称"}},[o("el-input",{attrs:{placeholder:"请输入",clearable:""},model:{value:t.param.orgNameLike,callback:function(e){t.$set(t.param,"orgNameLike",e)},expression:"param.orgNameLike"}})],1),o("el-form-item",{attrs:{label:"状态"}},[o("el-select",{attrs:{placeholder:"请选择",clearable:""},model:{value:t.param.contStatus,callback:function(e){t.$set(t.param,"contStatus",e)},expression:"param.contStatus"}},t._l(t.statusOptions,(function(t){return o("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),o("el-form-item",[o("el-button",{on:{click:function(e){return t.doSearch()}}},[t._v("查询")])],1)],1)],1),o("json-table",{ref:"myJsonTable",attrs:{"table-heads":t.tableHeads,loading:t.listLoading,"table-data":t.tableData,page:t.page},on:{"current-change":t.currentPageChange},scopedSlots:t._u([{key:"operations",fn:function(e){return[o("permission-filter",{attrs:{code:"contentContributionAudit",size:"mini",type:"primary"},nativeOn:{click:function(o){return t.doAudit(e.rowData.scope.row)}}}),o("permission-filter",{attrs:{code:"contentContributionDelete",size:"mini",type:"danger"},nativeOn:{click:function(o){return t.doDelete(e.rowData.scope.row)}}})]}},{key:"contStatus",fn:function(e){return[0===e.rowData.scope.row.contStatus?o("el-tag",{attrs:{type:"primary"}},[t._v("未审核")]):t._e(),1===e.rowData.scope.row.contStatus?o("el-tag",{attrs:{type:"success"}},[t._v("通过")]):t._e(),2===e.rowData.scope.row.contStatus?o("el-tag",{attrs:{type:"danger"}},[t._v("不通过")]):t._e()]}},{key:"contCreateTime",fn:function(e){return[o("span",[t._v(t._s(t._f("formatDate")(e.rowData.scope.row.contCreateTime,"yyyy-MM-dd HH:mm:ss")))])]}}])}),o("edit-dialog",{attrs:{entity:t.chooseEntity},on:{change:function(e){return t.handleChange()}},model:{value:t.dialogShow,callback:function(e){t.dialogShow=e},expression:"dialogShow"}}),o("audit-dialog",{attrs:{entity:t.chooseEntity},on:{change:function(e){return t.handleChange()}},model:{value:t.auditDialogShow,callback:function(e){t.auditDialogShow=e},expression:"auditDialogShow"}})],1)},i=[],a=o("5530"),r=o("4303"),l=o("261a"),s=o("e101"),c=o("72c6"),u=o("d6e2"),d=o("760d"),m=o("d1e5"),f={components:{JsonFilter:r["a"],JsonTable:l["a"],PermissionFilter:s["a"],EditDialog:c["default"],AuditDialog:u["default"]},data:function(){return{titleCode:"contentContribution",tableHeads:[{prop:"contTitle",label:"标题",overflowTooltip:"show"},{prop:"contUsername",label:"投稿人"},{prop:"userPhone",label:"投稿手机号"},{slot:!0,prop:"contStatus",label:"审核"},{slot:!0,prop:"contCreateTime",label:"创建时间"},{prop:"orgName",label:"学校名称"},{slot:!0,fixed:"right",prop:"operations",label:"操作",width:180}],listLoading:!1,tableData:[],param:{orgNameLike:"",contStatus:""},page:{limit:5,current:1,total:0},dialogShow:!1,chooseEntity:null,statusOptions:[{label:"未审核",value:"0"},{label:"审核通过",value:"1"},{label:"审核不通过",value:"2"}],auditDialogShow:!1}},computed:{},created:function(){this.getTableData()},methods:{getTableData:function(){var t=this;this.listLoading=!0,Object(d["b"])(Object(a["a"])(Object(a["a"])({},m["a"].do(this.param,["orgNameLike"])),{},{page:this.page.current,limit:this.page.limit})).then((function(e){t.listLoading=!1,e.success?(t.tableData=e.root,t.page.total=e.totalSize):(t.tableData=[],t.page.total=0,t.$notify({title:"提示",message:e.failReasonShow||"未获取到数据",type:"warning"}))}))},currentPageChange:function(t){this.page.current=t,this.getTableData()},doSearch:function(){this.page.current=1,this.getTableData()},doDelete:function(t){var e=this;this.$confirm("确定删除？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",beforeClose:function(o,n,i){"confirm"===o?Object(d["a"])({id:t.contId}).then((function(t){t.success?(e.$notify({title:"成功",message:"操作成功!",type:"success"}),e.getTableData()):e.$notify.error({title:"失败",message:t.failReasonShow||"操作失败"}),i()})).catch((function(t){e.$notify.error({title:"失败",message:"请求发生错误， 请重试"}),i()})):i()}})},handleChange:function(){this.getTableData()},doAdd:function(){this.chooseEntity=null===this.chooseEntity?{}:null,this.dialogShow=!0},doEdit:function(t){this.chooseEntity=t,t.uniquelyIdentifies=(new Date).getTime(),this.dialogShow=!0},doAudit:function(t){this.chooseEntity=t,t.uniquelyIdentifies=(new Date).getTime(),this.auditDialogShow=!0}}},p=f,b=o("2877"),h=Object(b["a"])(p,n,i,!1,null,"46ef25a6",null);e["default"]=h.exports},"72c6":function(t,e,o){"use strict";o.r(e);var n=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("el-dialog",{attrs:{title:t.dialogTitle,visible:t.isVisible,width:"40%",top:"4vh","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(e){t.isVisible=e}}},[o("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules,"label-width":"auto"}},[o("el-form-item",{attrs:{label:"学校",prop:"notiOperatorId"}},[o("el-input",{attrs:{placeholder:"请输入"},model:{value:t.form.notiContent,callback:function(e){t.$set(t.form,"notiContent",e)},expression:"form.notiContent"}})],1),o("el-form-item",{attrs:{label:"校区",prop:"notiOperatorId"}},[o("el-input",{attrs:{placeholder:"请输入"},model:{value:t.form.notiContent,callback:function(e){t.$set(t.form,"notiContent",e)},expression:"form.notiContent"}})],1),o("el-form-item",{attrs:{label:"关联文章",prop:"notiOperatorId"}},[o("el-input",{attrs:{placeholder:"请输入"},model:{value:t.form.notiContent,callback:function(e){t.$set(t.form,"notiContent",e)},expression:"form.notiContent"}})],1),o("el-form-item",{attrs:{label:"通知范围",prop:"notiOperatorId"}},[o("el-input",{attrs:{placeholder:"请输入"},model:{value:t.form.notiContent,callback:function(e){t.$set(t.form,"notiContent",e)},expression:"form.notiContent"}})],1),o("el-form-item",{attrs:{label:"通知目标",prop:"notiOperatorId"}},[o("el-input",{attrs:{placeholder:"请输入"},model:{value:t.form.notiContent,callback:function(e){t.$set(t.form,"notiContent",e)},expression:"form.notiContent"}})],1),o("el-form-item",{attrs:{label:"内容",prop:"notiOperatorId"}},[o("el-input",{attrs:{placeholder:"请输入"},model:{value:t.form.notiContent,callback:function(e){t.$set(t.form,"notiContent",e)},expression:"form.notiContent"}})],1)],1),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(e){t.isVisible=!1}}},[t._v("取 消")]),o("el-button",{directives:[{name:"loading",rawName:"v-loading",value:t.submitting,expression:"submitting"}],attrs:{type:"primary",disabled:t.submitting},on:{click:function(e){return t.submitClick()}}},[t._v("确 定")])],1)],1)],1)},i=[],a=o("5530"),r=(o("159b"),o("ad78")),l={name:"EditDialog",mixins:[r["a"]],props:{entity:{type:Object}},components:{},data:function(){return{submitting:!1,form:{notiId:"",notiOperatorId:"",notiOperatorName:"",notiContent:""},selected2:"",rules:{notiOperatorId:[{required:!0,message:"请选择！",trigger:"change"}],notiContent:[{required:!0,message:"不能为空！",trigger:"blur"}]}}},watch:{entity:function(t){t&&t.notiId?(this.form.notiId=t.notiId,this.form.notiOperatorId=t.notiOperatorId,this.form.notiOperatorName=t.notiOperatorName,this.form.notiContent=t.notiContent):this.form={notiOperatorId:"",notiOperatorName:"",notiContent:""}}},computed:{isEdit:function(){return this.entity&&this.entity.notiId},dialogTitle:function(){return this.isEdit?"编辑":"添加"}},methods:{getOperatorName:function(t){var e="";this.operatorList.forEach((function(o){o.operId==t&&(e=o.operName)})),this.form.notiOperatorName=e},submitClick:function(){var t=this;this.$refs.form.validate((function(e){if(e){var o=Object(a["a"])({},t.form);t.submitting=!0,(t.isEdit?updateNotice(o):insertNotice(o)).then((function(e){t.submitting=!1,e.success?(t.$refs["form"].resetFields(),t.$notify({title:"成功",message:"操作成功",type:"success"}),t.$emit("change"),t.isVisible=!1):t.$notify.error({title:"失败",message:e.failReasonShow||"操作失败"})}))}}))}}},s=l,c=(o("00a2"),o("2877")),u=Object(c["a"])(s,n,i,!1,null,"696b57fe",null);e["default"]=u.exports},"760d":function(t,e,o){"use strict";o.d(e,"b",(function(){return i})),o.d(e,"c",(function(){return a})),o.d(e,"a",(function(){return r}));var n=o("b775");function i(t){return Object(n["a"])({url:"/admin/contributions/selectByContributionsQuery",method:"post",data:t})}function a(t){return Object(n["a"])({url:"/admin/contributions/update",method:"post",data:t})}function r(t){return Object(n["a"])({url:"/admin/contributions/delete",method:"post",data:t})}},a121:function(t,e,o){"use strict";o("efd3")},d1e5:function(t,e,o){"use strict";o("159b");var n={do:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],o={},n=function(n){var i=!0;e.forEach((function(t){t===n&&(i=!1)})),i?o["param.".concat(n)]=t[n]:o[n]=t[n]};for(var i in t)n(i);return o}};e["a"]=n},d6e2:function(t,e,o){"use strict";o.r(e);var n=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("el-dialog",{attrs:{title:t.dialogTitle,visible:t.isVisible,width:"40%",top:"4vh","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(e){t.isVisible=e}}},[null!==t.entity?o("el-form",{ref:"form",attrs:{model:t.form,"label-width":"150",rules:t.rules}},[o("el-form-item",{attrs:{label:"投稿人："}},[o("el-input",{attrs:{type:"textarea",readonly:""},model:{value:t.entity.articleCreateUsername,callback:function(e){t.$set(t.entity,"articleCreateUsername",e)},expression:"entity.articleCreateUsername"}})],1),o("el-form-item",{attrs:{label:"联系方式："}},[o("el-input",{attrs:{readonly:""},model:{value:t.entity.userPhone,callback:function(e){t.$set(t.entity,"userPhone",e)},expression:"entity.userPhone"}})],1),o("el-form-item",{attrs:{label:"内容："}},[o("el-input",{attrs:{type:"textarea",readonly:""},model:{value:t.entity.articleContent,callback:function(e){t.$set(t.entity,"articleContent",e)},expression:"entity.articleContent"}})],1),o("el-form-item",{attrs:{label:"创建时间："}},[o("el-date-picker",{attrs:{type:"datetime",placeholder:"选择日期时间",readonly:""},model:{value:t.entity.articleCreateTime,callback:function(e){t.$set(t.entity,"articleCreateTime",e)},expression:"entity.articleCreateTime"}})],1),o("el-form-item",{attrs:{label:"审核："}},[o("el-switch",{staticStyle:{"margin-right":"5px"},attrs:{"active-color":"#13ce66","active-value":1,"inactive-color":"#909399","inactive-value":2},model:{value:t.form.contStatus,callback:function(e){t.$set(t.form,"contStatus",e)},expression:"form.contStatus"}}),1===t.form.contStatus?o("el-tag",{attrs:{size:"small",type:"success"}},[t._v("通过")]):o("el-tag",{attrs:{size:"small",type:"danger"}},[t._v("不通过")])],1),2===t.form.contStatus?o("el-form-item",{attrs:{label:"请输入原因：",prop:"contAuditFailureReason"}},[o("el-input",{attrs:{type:"textarea",placeholder:"请输入原因："},model:{value:t.form.contAuditFailureReason,callback:function(e){t.$set(t.form,"contAuditFailureReason",e)},expression:"form.contAuditFailureReason"}})],1):t._e()],1):t._e(),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{directives:[{name:"loading",rawName:"v-loading",value:t.submitting,expression:"submitting"}],attrs:{type:"primary",disabled:t.submitting},on:{click:function(e){return t.audit()}}},[t._v("确定")])],1)],1)],1)},i=[],a=o("5530"),r=o("ad78"),l=o("760d"),s={name:"AuditDialog",mixins:[r["a"]],props:{entity:{type:Object}},data:function(){return{submitting:!1,form:{contId:"",contStatus:"",contAuditFailureReason:""},rules:{contAuditFailureReason:[{required:!0,message:"请输入审核失败原因",trigger:"blur"}]}}},computed:{dialogTitle:function(){return"征集投稿审核"}},watch:{entity:function(t){t&&t.contId&&(this.form.contId=t.contId,this.form.contStatus=1)}},methods:{audit:function(){var t=this;this.$refs.form.validate((function(e){if(e){var o=Object(a["a"])({},t.form);t.submitting=!0,Object(l["c"])(Object(a["a"])({},o)).then((function(e){t.submitting=!1,e.success?(t.$refs["form"].resetFields(),t.$notify({title:"成功",message:"操作成功",type:"success"}),t.$emit("change"),t.isVisible=!1):t.$notify.error({title:"失败",message:e.failReasonShow||"操作失败"})}))}}))}}},c=s,u=(o("a121"),o("2877")),d=Object(u["a"])(c,n,i,!1,null,"2de35c9c",null);e["default"]=d.exports},e349:function(t,e,o){},efd3:function(t,e,o){}}]);