(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-fee1874a"],{"1ca9":function(t,e,o){"use strict";o.d(e,"b",(function(){return n})),o.d(e,"c",(function(){return a})),o.d(e,"a",(function(){return s}));var i=o("b775");function n(t){return Object(i["a"])({url:"/admin/suggestions/selectBySuggestionsQuery",method:"post",data:t})}function a(t){return Object(i["a"])({url:"/admin/suggestions/update",method:"post",data:t})}function s(t){return Object(i["a"])({url:"/admin/suggestions/delete",method:"post",data:t})}},3790:function(t,e,o){},"6e49":function(t,e,o){"use strict";o.r(e);var i=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("el-dialog",{attrs:{title:t.dialogTitle,visible:t.isVisible,width:"40%",top:"4vh","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(e){t.isVisible=e}}},[null!==t.entity?o("el-form",{ref:"form",attrs:{model:t.form,"label-width":"150",rules:t.rules}},[o("el-form-item",{attrs:{label:"创建时间："}},[o("el-date-picker",{attrs:{type:"datetime",placeholder:"选择日期时间",readonly:""},model:{value:t.entity.suggCreateTime,callback:function(e){t.$set(t.entity,"suggCreateTime",e)},expression:"entity.suggCreateTime"}})],1),o("el-form-item",{attrs:{label:"意见人："}},[o("el-input",{attrs:{readonly:""},model:{value:t.entity.suggUsername,callback:function(e){t.$set(t.entity,"suggUsername",e)},expression:"entity.suggUsername"}})],1),o("el-form-item",{attrs:{label:"手机号："}},[o("el-input",{attrs:{readonly:""},model:{value:t.entity.suggUserPhone,callback:function(e){t.$set(t.entity,"suggUserPhone",e)},expression:"entity.suggUserPhone"}})],1),o("el-form-item",{attrs:{label:"意见内容："}},[o("el-input",{attrs:{type:"textarea",readonly:""},model:{value:t.entity.suggContent,callback:function(e){t.$set(t.entity,"suggContent",e)},expression:"entity.suggContent"}})],1),o("el-form-item",{attrs:{label:"意见处理："}},[o("el-switch",{staticStyle:{"margin-right":"5px"},attrs:{"active-color":"#13ce66","active-value":1,"inactive-color":"#909399","inactive-value":2},model:{value:t.form.suggStatus,callback:function(e){t.$set(t.form,"suggStatus",e)},expression:"form.suggStatus"}}),1===t.form.suggStatus?o("el-tag",{attrs:{size:"small",type:"success"}},[t._v("采纳")]):o("el-tag",{attrs:{size:"small",type:"danger"}},[t._v("未采纳")])],1),2===t.form.suggStatus?o("el-form-item",{attrs:{label:"请输入原因：",prop:"suggNotAdoptReason"}},[o("el-input",{attrs:{type:"textarea",placeholder:"请输入原因："},model:{value:t.form.suggNotAdoptReason,callback:function(e){t.$set(t.form,"suggNotAdoptReason",e)},expression:"form.suggNotAdoptReason"}})],1):t._e()],1):t._e(),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{directives:[{name:"loading",rawName:"v-loading",value:t.submitting,expression:"submitting"}],attrs:{type:"primary",disabled:t.submitting},on:{click:function(e){return t.audit()}}},[t._v("确定")])],1)],1)],1)},n=[],a=o("5530"),s=o("ad78"),r=o("1ca9"),l={name:"AuditDialog",mixins:[s["a"]],props:{entity:{type:Object}},data:function(){return{submitting:!1,form:{suggId:"",suggStatus:"",suggNotAdoptReason:""},rules:{suggNotAdoptReason:[{required:!0,message:"请输入审核失败原因",trigger:"blur"}]}}},computed:{dialogTitle:function(){return"教育资料管理审核"}},watch:{entity:function(t){t&&t.suggId&&(this.form.suggId=t.suggId,this.form.suggStatus=1)}},methods:{audit:function(){var t=this;this.$refs.form.validate((function(e){if(e){var o=Object(a["a"])({},t.form);t.submitting=!0,Object(r["c"])(Object(a["a"])({},o)).then((function(e){t.submitting=!1,e.success?(t.$refs["form"].resetFields(),t.$notify({title:"成功",message:"操作成功",type:"success"}),t.$emit("change"),t.isVisible=!1):t.$notify.error({title:"失败",message:e.failReasonShow||"操作失败"})}))}}))}}},u=l,c=(o("8fc5"),o("2877")),g=Object(c["a"])(u,i,n,!1,null,"3757d9db",null);e["default"]=g.exports},8988:function(t,e,o){"use strict";o("3790")},"8fc5":function(t,e,o){"use strict";o("efc5")},a12c:function(t,e,o){"use strict";o.r(e);var i=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("el-dialog",{attrs:{title:t.dialogTitle,visible:t.isVisible,width:"40%",top:"4vh","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(e){t.isVisible=e}}},[o("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules,"label-width":"auto"}},[o("el-form-item",{attrs:{label:"学校",prop:"notiOperatorId"}},[o("el-input",{attrs:{placeholder:"请输入"},model:{value:t.form.notiContent,callback:function(e){t.$set(t.form,"notiContent",e)},expression:"form.notiContent"}})],1),o("el-form-item",{attrs:{label:"校区",prop:"notiOperatorId"}},[o("el-input",{attrs:{placeholder:"请输入"},model:{value:t.form.notiContent,callback:function(e){t.$set(t.form,"notiContent",e)},expression:"form.notiContent"}})],1),o("el-form-item",{attrs:{label:"关联文章",prop:"notiOperatorId"}},[o("el-input",{attrs:{placeholder:"请输入"},model:{value:t.form.notiContent,callback:function(e){t.$set(t.form,"notiContent",e)},expression:"form.notiContent"}})],1),o("el-form-item",{attrs:{label:"通知范围",prop:"notiOperatorId"}},[o("el-input",{attrs:{placeholder:"请输入"},model:{value:t.form.notiContent,callback:function(e){t.$set(t.form,"notiContent",e)},expression:"form.notiContent"}})],1),o("el-form-item",{attrs:{label:"通知目标",prop:"notiOperatorId"}},[o("el-input",{attrs:{placeholder:"请输入"},model:{value:t.form.notiContent,callback:function(e){t.$set(t.form,"notiContent",e)},expression:"form.notiContent"}})],1),o("el-form-item",{attrs:{label:"内容",prop:"notiOperatorId"}},[o("el-input",{attrs:{placeholder:"请输入"},model:{value:t.form.notiContent,callback:function(e){t.$set(t.form,"notiContent",e)},expression:"form.notiContent"}})],1)],1),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(e){t.isVisible=!1}}},[t._v("取 消")]),o("el-button",{directives:[{name:"loading",rawName:"v-loading",value:t.submitting,expression:"submitting"}],attrs:{type:"primary",disabled:t.submitting},on:{click:function(e){return t.submitClick()}}},[t._v("确 定")])],1)],1)],1)},n=[],a=o("5530"),s=(o("159b"),o("ad78")),r={name:"EditDialog",mixins:[s["a"]],props:{entity:{type:Object}},components:{},data:function(){return{submitting:!1,form:{notiId:"",notiOperatorId:"",notiOperatorName:"",notiContent:""},selected2:"",rules:{notiOperatorId:[{required:!0,message:"请选择！",trigger:"change"}],notiContent:[{required:!0,message:"不能为空！",trigger:"blur"}]}}},watch:{entity:function(t){t&&t.notiId?(this.form.notiId=t.notiId,this.form.notiOperatorId=t.notiOperatorId,this.form.notiOperatorName=t.notiOperatorName,this.form.notiContent=t.notiContent):this.form={notiOperatorId:"",notiOperatorName:"",notiContent:""}}},computed:{isEdit:function(){return this.entity&&this.entity.notiId},dialogTitle:function(){return this.isEdit?"编辑":"添加"}},methods:{getOperatorName:function(t){var e="";this.operatorList.forEach((function(o){o.operId==t&&(e=o.operName)})),this.form.notiOperatorName=e},submitClick:function(){var t=this;this.$refs.form.validate((function(e){if(e){var o=Object(a["a"])({},t.form);t.submitting=!0,(t.isEdit?updateNotice(o):insertNotice(o)).then((function(e){t.submitting=!1,e.success?(t.$refs["form"].resetFields(),t.$notify({title:"成功",message:"操作成功",type:"success"}),t.$emit("change"),t.isVisible=!1):t.$notify.error({title:"失败",message:e.failReasonShow||"操作失败"})}))}}))}}},l=r,u=(o("8988"),o("2877")),c=Object(u["a"])(l,i,n,!1,null,"5f6c5fac",null);e["default"]=c.exports},db2b:function(t,e,o){"use strict";o.r(e);var i=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"list-view-layout"},[o("json-filter",{attrs:{code:t.titleCode}},[o("el-form",{attrs:{inline:!0}},[o("el-form-item",{attrs:{label:"状态"}},[o("el-select",{attrs:{placeholder:"请选择",clearable:""},model:{value:t.param.suggStatus,callback:function(e){t.$set(t.param,"suggStatus",e)},expression:"param.suggStatus"}},t._l(t.statusOptions,(function(t){return o("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),o("el-form-item",[o("el-button",{on:{click:function(e){return t.doSearch()}}},[t._v("查询")])],1)],1)],1),o("json-table",{ref:"myJsonTable",attrs:{"table-heads":t.tableHeads,loading:t.listLoading,"table-data":t.tableData,page:t.page},on:{"current-change":t.currentPageChange},scopedSlots:t._u([{key:"operations",fn:function(e){return[o("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(o){return t.doAudit(e.rowData.scope.row)}}},[t._v("处理")]),o("permission-filter",{attrs:{code:"contentSuggestionsDelete",size:"mini",type:"danger"},nativeOn:{click:function(o){return t.doDelete(e.rowData.scope.row)}}})]}},{key:"suggCreateTime",fn:function(e){return[o("span",[t._v(t._s(t._f("formatDate")(e.rowData.scope.row.suggCreateTime,"yyyy-MM-dd HH:mm:ss")))])]}},{key:"suggStatus",fn:function(e){return[0===e.rowData.scope.row.suggStatus?o("el-tag",{attrs:{type:"primary"}},[t._v("未审阅")]):t._e(),1===e.rowData.scope.row.suggStatus?o("el-tag",{attrs:{type:"success"}},[t._v("已采纳")]):t._e(),2===e.rowData.scope.row.suggStatus?o("el-tag",{attrs:{type:"danger"}},[t._v("未采纳")]):t._e()]}}])}),o("edit-dialog",{attrs:{entity:t.chooseEntity},on:{change:function(e){return t.handleChange()}},model:{value:t.dialogShow,callback:function(e){t.dialogShow=e},expression:"dialogShow"}}),o("audit-dialog",{attrs:{entity:t.chooseEntity},on:{change:function(e){return t.handleChange()}},model:{value:t.auditDialogShow,callback:function(e){t.auditDialogShow=e},expression:"auditDialogShow"}})],1)},n=[],a=o("4303"),s=o("261a"),r=o("e101"),l=o("a12c"),u=o("6e49"),c=o("1ca9"),g={components:{JsonFilter:a["a"],JsonTable:s["a"],PermissionFilter:r["a"],EditDialog:l["default"],AuditDialog:u["default"]},data:function(){return{titleCode:"contentSuggestions",tableHeads:[{prop:"suggContent",label:"内容",overflowTooltip:"show"},{prop:"suggUsername",label:"意见人"},{prop:"suggUserPhone",label:"投稿手机号"},{slot:!0,prop:"suggStatus",label:"状态"},{slot:!0,prop:"suggCreateTime",label:"创建时间"},{slot:!0,fixed:"right",prop:"operations",label:"操作",width:180}],listLoading:!1,tableData:[],param:{orgName:"",suggStatus:""},page:{limit:15,current:1,total:15},dialogShow:!1,chooseEntity:null,statusOptions:[{label:"未审阅",value:"0"},{label:"已采纳",value:"1"},{label:"未采纳",value:"2"}],auditParam:{suggStatus:0,suggId:""},auditDialogShow:!1}},computed:{},created:function(){this.getTableData()},methods:{getTableData:function(){var t=this;this.listLoading=!0,Object(c["b"])({"param.suggStatus":this.param.suggStatus,page:this.page.current,limit:this.page.limit}).then((function(e){t.listLoading=!1,e.success?(t.tableData=e.root,t.page.total=e.totalSize):(t.tableData=[],t.page.total=0,t.$notify({title:"提示",message:e.failReasonShow||"未获取到数据",type:"warning"}))}))},currentPageChange:function(t){this.page.current=t,this.getTableData()},doSearch:function(){this.page.current=1,this.getTableData()},doDelete:function(t){var e=this;this.$confirm("确定删除？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",beforeClose:function(o,i,n){"confirm"===o?Object(c["a"])({id:t.suggId}).then((function(t){t.success?(e.$notify({title:"成功",message:"操作成功!",type:"success"}),e.getTableData()):e.$notify.error({title:"失败",message:t.failReasonShow||"操作失败"}),n()})).catch((function(t){e.$notify.error({title:"失败",message:"请求发生错误， 请重试"}),n()})):n()}})},handleChange:function(){this.getTableData()},doAdd:function(){this.chooseEntity=null===this.chooseEntity?{}:null,this.dialogShow=!0},doEdit:function(t){this.chooseEntity=t,t.uniquelyIdentifies=(new Date).getTime(),this.dialogShow=!0},doAudit:function(t){this.chooseEntity=t,t.uniquelyIdentifies=(new Date).getTime(),this.auditDialogShow=!0}}},d=g,m=o("2877"),f=Object(m["a"])(d,i,n,!1,null,"83dada5a",null);e["default"]=f.exports},efc5:function(t,e,o){}}]);