(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3be3df28"],{"2d49":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"list-view-layout"},[r("json-filter",{attrs:{code:e.titleCode}},[r("el-form",{attrs:{inline:!0}},[r("el-form-item",{attrs:{label:"岗位"}},[r("el-input",{attrs:{placeholder:"请输入",clearable:""},model:{value:e.param.userRoleName,callback:function(t){e.$set(e.param,"userRoleName",t)},expression:"param.userRoleName"}})],1),r("el-form-item",{attrs:{label:"区域"}},[r("el-input",{attrs:{placeholder:"请输入",clearable:""},model:{value:e.param.areaIsLike,callback:function(t){e.$set(e.param,"areaIsLike",t)},expression:"param.areaIsLike"}})],1),r("el-form-item",{attrs:{label:"账号"}},[r("el-input",{attrs:{placeholder:"请输入",clearable:""},model:{value:e.param.userAccountIsLike,callback:function(t){e.$set(e.param,"userAccountIsLike",t)},expression:"param.userAccountIsLike"}})],1),r("el-form-item",{attrs:{label:"责任范围"}},[r("el-input",{attrs:{placeholder:"请输入",clearable:""},model:{value:e.param.userDutyRangeLike,callback:function(t){e.$set(e.param,"userDutyRangeLike",t)},expression:"param.userDutyRangeLike"}})],1),r("el-form-item",[r("el-button",{on:{click:function(t){return e.doSearch()}}},[e._v("查询")]),r("permission-filter",{attrs:{code:"userGovernmentAdd",type:"primary"},nativeOn:{click:function(t){return e.doAdd()}}}),r("permission-filter",{attrs:{code:"userGovernmentImport",type:"primary"},nativeOn:{click:function(t){return e.doImport()}}}),r("permission-filter",{attrs:{code:"userGovernmentExport",type:"primary"},nativeOn:{click:function(t){return e.doExport()}}})],1)],1)],1),r("json-table",{ref:"myJsonTable",attrs:{"table-heads":e.tableHeads,loading:e.listLoading,"table-data":e.tableData,page:e.page},on:{"current-change":e.currentPageChange},scopedSlots:e._u([{key:"userCreateTime",fn:function(t){return[r("span",[e._v(e._s(e._f("formatDate")(t.rowData.scope.row.userCreateTime,"yyyy-MM-dd HH:mm:ss")))])]}},{key:"operations",fn:function(t){return[r("permission-filter",{attrs:{code:"userGovernmentEdit",size:"mini",type:"warning"},nativeOn:{click:function(r){return e.doEdit(t.rowData.scope.row)}}})]}}])}),r("edit-dialog",{attrs:{entity:e.chooseEntity},on:{change:function(t){return e.handleChange()}},model:{value:e.dialogShow,callback:function(t){e.dialogShow=t},expression:"dialogShow"}}),r("import-dialog",{attrs:{title:"Excel文件导入",url:"/admin/departmentUser/importExcel",formats:["xls","xlsx"]},on:{change:function(t){return e.doSearch()}},model:{value:e.importDialogShow,callback:function(t){e.importDialogShow=t},expression:"importDialogShow"}})],1)},o=[],s=r("5530"),i=r("4303"),n=r("261a"),l=r("e101"),u=r("6d51"),c=r("4f29"),d=r("f46a"),m={components:{ImportDialog:c["a"],JsonFilter:i["a"],JsonTable:n["a"],PermissionFilter:l["a"],EditDialog:u["default"]},data:function(){return{titleCode:"userGovernment",tableHeads:[{prop:"userRealName",label:"姓名"},{prop:"userNickname",label:"昵称"},{prop:"userPhone",label:"联系方式"},{prop:"userCountry",label:"国家"},{prop:"userProvince",label:"省份"},{prop:"userCity",label:"城市"},{prop:"userArea",label:"县区"},{prop:"userRoleName",label:"岗位"},{prop:"userArea",label:"区域",overflowTooltip:"show"},{prop:"userDutyRange",label:"责任范围"},{slot:!0,prop:"userCreateTime",label:"创建时间"},{slot:!0,fixed:"right",prop:"operations",label:"操作",width:180}],listLoading:!1,tableData:[],param:{userRoleName:"",areaIsLike:"",userAccountIsLike:"",userDutyRangeLike:""},page:{limit:15,current:1,total:15},dialogShow:!1,chooseEntity:null,importDialogShow:!1,exportLoading:!1}},computed:{},created:function(){this.getTableData()},methods:{getTableData:function(){var e=this;this.listLoading=!0,Object(d["c"])(Object(s["a"])(Object(s["a"])({},this.param),{},{"param.userRoleName":this.param.userRoleName,page:this.page.current,limit:this.page.limit})).then((function(t){e.listLoading=!1,t.success?(e.tableData=t.root,e.page.total=t.totalSize):(e.tableData=[],e.page.total=0,e.$notify({title:"提示",message:t.failReasonShow||"未获取到数据",type:"warning"}))}))},currentPageChange:function(e){this.page.current=e,this.getTableData()},doSearch:function(){this.page.current=1,this.getTableData()},handleChange:function(){this.getTableData()},doEdit:function(e){this.chooseEntity=e,e.uniquelyIdentifies=(new Date).getTime(),this.dialogShow=!0},doAdd:function(){this.chooseEntity=null===this.chooseEntity?{}:null,this.dialogShow=!0},doImport:function(){this.importDialogShow=!0},doExport:function(){var e=this;this.exportLoading||(this.exportLoading=!0,Object(d["b"])(Object(s["a"])(Object(s["a"])({},this.param),{},{isExport:"Y"})).then((function(t){if(e.exportLoading=!1,t.success){var r=e.BASEFILEURL;window.open(r+t.tip)}else e.$notify({title:"提示",message:t.failReasonShow||"Excel 导出错误！",type:"warning"})})))}}},p=m,f=r("2877"),g=Object(f["a"])(p,a,o,!1,null,"2f367c7e",null);t["default"]=g.exports},"349c":function(e,t,r){"use strict";r.d(t,"c",(function(){return o})),r.d(t,"b",(function(){return s})),r.d(t,"d",(function(){return i})),r.d(t,"e",(function(){return n})),r.d(t,"a",(function(){return l}));var a=r("b775");function o(e){return Object(a["a"])({url:"/admin/organization/selectByQuery",method:"post",data:e})}function s(e){return Object(a["a"])({url:"/admin/organization/exportExcel",method:"post",data:e})}function i(e){return Object(a["a"])({url:"/admin/organization/addOrgnization",method:"post",data:e})}function n(e){return Object(a["a"])({url:"/admin/organization/updateOrgnization",method:"post",data:e})}function l(e){return Object(a["a"])({url:"/admin/organization/deleteOrgnization",method:"post",data:e})}},"6d51":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-dialog",{attrs:{title:e.dialogTitle,visible:e.isVisible,width:"40%","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.isVisible=t}}},[r("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"auto"}},[r("el-form-item",{attrs:{label:"用户昵称：",prop:"userNickname"}},[r("el-input",{attrs:{placeholder:"请输入用户昵称"},model:{value:e.form.userNickname,callback:function(t){e.$set(e.form,"userNickname",t)},expression:"form.userNickname"}})],1),r("el-form-item",{attrs:{label:"手机号：",prop:"userPhone"}},[r("el-input",{attrs:{placeholder:"请输入手机号",disabled:!!e.isEdit},model:{value:e.form.userPhone,callback:function(t){e.$set(e.form,"userPhone",t)},expression:"form.userPhone"}})],1),r("el-form-item",{attrs:{label:"身份证号：",prop:"userIdNumber"}},[r("el-input",{attrs:{placeholder:"请输入身份证号"},model:{value:e.form.userIdNumber,callback:function(t){e.$set(e.form,"userIdNumber",t)},expression:"form.userIdNumber"}})],1),r("el-form-item",{attrs:{label:"姓名",prop:"userRealName"}},[r("el-input",{attrs:{placeholder:"请输入姓名"},model:{value:e.form.userRealName,callback:function(t){e.$set(e.form,"userRealName",t)},expression:"form.userRealName"}})],1),r("el-form-item",{attrs:{label:"密码",prop:e.userPassword}},[r("el-input",{attrs:{placeholder:"请输入密码"},model:{value:e.form.userPassword,callback:function(t){e.$set(e.form,"userPassword",t)},expression:"form.userPassword"}})],1),r("el-form-item",{attrs:{label:"省/市/区",prop:"pcaa"}},[r("select-town",{attrs:{address:e.form.pcaa,"is-three-level":!0},on:{getAddress:e.getAddress}})],1),r("el-form-item",{attrs:{label:"详细地址",prop:"userAddress"}},[r("el-input",{attrs:{placeholder:"请输入详细地址"},model:{value:e.form.userAddress,callback:function(t){e.$set(e.form,"userAddress",t)},expression:"form.userAddress"}})],1),r("el-form-item",{attrs:{label:"性别："}},[r("el-switch",{staticStyle:{"margin-right":"5px"},attrs:{"active-color":"blue","active-value":1,"inactive-color":"pink","inactive-value":2},model:{value:e.form.userSex,callback:function(t){e.$set(e.form,"userSex",t)},expression:"form.userSex"}}),1===e.form.userSex?r("el-tag",{attrs:{size:"small"}},[e._v("男")]):r("el-tag",{attrs:{size:"small",type:"danger"}},[e._v("女")])],1),r("el-form-item",{attrs:{label:"角色：",prop:"roleId"}},[r("el-select",{attrs:{placeholder:"请选择角色"},on:{focus:e.getRoleList},model:{value:e.form.roleId,callback:function(t){e.$set(e.form,"roleId",t)},expression:"form.roleId"}},e._l(e.roleList,(function(e){return r("el-option",{key:e.roleId,attrs:{label:e.roleName,value:e.roleId}})})),1)],1),r("el-form-item",{attrs:{label:"学校：",prop:"orgId"}},[r("el-select",{attrs:{placeholder:"请选择学校"},on:{focus:e.getSchoolList},model:{value:e.form.orgId,callback:function(t){e.$set(e.form,"orgId",t)},expression:"form.orgId"}},e._l(e.schoolList,(function(e){return r("el-option",{key:e.orgId,attrs:{label:e.orgName,value:e.orgId}})})),1)],1)],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("取 消")]),r("el-button",{directives:[{name:"loading",rawName:"v-loading",value:e.submitting,expression:"submitting"}],attrs:{type:"primary",disabled:e.submitting},on:{click:e.submitClick}},[e._v("确 定")])],1)],1)],1)},o=[],s=r("1da1"),i=r("5530"),n=(r("96cf"),r("ad78")),l=r("d1e5"),u=r("0eb1"),c=r("f46a"),d=r("349c"),m=r("61f7"),p={name:"EditDialog",mixins:[n["a"]],props:{entity:{type:Object}},components:{SelectTown:u["default"]},data:function(){return{submitting:!1,form:{userRealName:"",userPassword:"",userPhone:"",userIdNumber:"",pcaa:[],userAddress:"",userSex:1,userNickname:"",roleId:"",orgId:""},selectaddress:[],schoolList:[],roleList:[],rules:{userRealName:[{required:!0,message:"不能为空！",trigger:"blur"}],userPhone:[{required:!0,message:"不能为空！",trigger:"blur"},{validator:m["e"],trigger:"blur"}],userIdNumber:[{required:!0,message:"不能为空！",trigger:"blur"},{validator:m["d"],trigger:"blur"}],userNickname:[{required:!0,message:"不能为空！",trigger:"blur"}],userPassword:[{required:!0,message:"不能为空！",trigger:"blur"}],pcaa:[{required:!0,message:"不能为空！",trigger:"blur"}],userAddress:[{required:!0,message:"不能为空！",trigger:"blur"}],roleId:[{required:!0,message:"请选择！",trigger:"blur"}],orgId:[{required:!0,message:"请选择！",trigger:"blur"}]}}},watch:{entity:function(e){e&&e.userId?(this.form.userId=e.userId,this.form.userRealName=e.userRealName,this.form.userPassword=e.userPassword,this.form.userAddress=e.userAddress,this.form.userPhone=e.userPhone,this.form.userIdNumber=e.userIdNumber,this.form.userSex=e.userSex,this.form.userNickname=e.userNickname,this.form.roleId=e.roleId,this.form.orgId=e.orgId,this.form.pcaa=[e.userProvince,e.userCity,e.userArea]):this.form={userRealName:"",userPassword:"",userPhone:"",userIdNumber:"",pcaa:[],userAddress:"",userSex:1,userNickname:"",roleId:"",orgId:""}}},computed:{isEdit:function(){return this.entity&&this.entity.userId},dialogTitle:function(){return this.isEdit?"编辑":"添加"},userPassword:function(){return this.isEdit?"":"userPassword"}},methods:{submitClick:function(){var e=this;this.$refs.form.validate((function(t){if(t){var r=e.isEdit?Object(i["a"])(Object(i["a"])({},l["a"].do(e.form)),{},{"param.userProvince":e.form.pcaa[0],"param.userCity":e.form.pcaa[1],"param.userArea":e.form.pcaa[2]}):Object(i["a"])(Object(i["a"])({},e.form),{},{userProvince:e.form.pcaa[0],userCity:e.form.pcaa[1],userArea:e.form.pcaa[2]});e.submitting=!0,(e.isEdit?Object(c["e"])(r):Object(c["a"])(r)).then((function(t){e.submitting=!1,t.success?(e.$refs["form"].resetFields(),e.$notify({title:"成功",message:"操作成功",type:"success"}),e.$emit("change"),e.isVisible=!1):e.$notify.error({title:"失败",message:t.failReasonShow||"操作失败"})}))}}))},getAddress:function(e){this.form.pcaa=e},getRoleList:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var r,a,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(c["d"])({"param.roleType":5});case 2:r=t.sent,a=r.success,o=r.root,a&&(e.roleList=o);case 6:case"end":return t.stop()}}),t)})))()},getSchoolList:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var r,a,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(d["c"])({page:1,limit:0});case 2:r=t.sent,a=r.success,o=r.root,a&&(e.schoolList=o);case 6:case"end":return t.stop()}}),t)})))()}}},f=p,g=(r("7035"),r("2877")),b=Object(g["a"])(f,a,o,!1,null,"d9f8ff7a",null);t["default"]=b.exports},7035:function(e,t,r){"use strict";r("a6f1")},a6f1:function(e,t,r){},d1e5:function(e,t,r){"use strict";r("159b");var a={do:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r={},a=function(a){var o=!0;t.forEach((function(e){e===a&&(o=!1)})),o?r["param.".concat(a)]=e[a]:r[a]=e[a]};for(var o in e)a(o);return r}};t["a"]=a},f46a:function(e,t,r){"use strict";r.d(t,"c",(function(){return o})),r.d(t,"b",(function(){return s})),r.d(t,"e",(function(){return i})),r.d(t,"a",(function(){return n})),r.d(t,"d",(function(){return l}));var a=r("b775");function o(e){return Object(a["a"])({url:"/admin/departmentUser/getDepartmentUser",method:"post",data:e})}function s(e){return Object(a["a"])({url:"/admin/departmentUser/exportExcel",method:"post",data:e})}function i(e){return Object(a["a"])({url:"/admin/departmentUser/updateDepartmentUser",method:"post",data:e})}function n(e){return Object(a["a"])({url:"/admin/departmentUser/addDepartmentUser",method:"post",data:e})}function l(e){return Object(a["a"])({url:"/admin/role/selectByExample",method:"post",data:e})}}}]);