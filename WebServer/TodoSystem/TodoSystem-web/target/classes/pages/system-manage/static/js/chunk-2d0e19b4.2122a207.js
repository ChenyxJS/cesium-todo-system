(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0e19b4"],{"7ac7":function(a,e,t){"use strict";t.r(e);var r=function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("div",{staticClass:"list-view-layout"},[t("json-filter",{attrs:{code:a.titleCode}},[t("el-form",{attrs:{inline:!0}},[t("el-form-item",{attrs:{label:"预警识别码"}},[t("el-input",{attrs:{placeholder:"请输入",clearable:""},model:{value:a.param.wadbNumberIsLike,callback:function(e){a.$set(a.param,"wadbNumberIsLike",e)},expression:"param.wadbNumberIsLike"}})],1),t("el-form-item",{attrs:{label:"行为概述"}},[t("el-input",{attrs:{placeholder:"请输入",clearable:""},model:{value:a.param.wadbSummaryIsLike,callback:function(e){a.$set(a.param,"wadbSummaryIsLike",e)},expression:"param.wadbSummaryIsLike"}})],1),t("el-form-item",{attrs:{label:"分类"}},[t("el-select",{attrs:{placeholder:"请选择",clearable:""},model:{value:a.param.wadbType,callback:function(e){a.$set(a.param,"wadbType",e)},expression:"param.wadbType"}},a._l(a.categoryList,(function(a){return t("el-option",{key:a.value,attrs:{label:a.label,value:a.value}})})),1)],1),t("el-form-item",[t("el-button",{on:{click:function(e){return a.doSearch()}}},[a._v("查询")]),t("permission-filter",{attrs:{code:"recordWarningExport",loading:a.exportLoading,type:"primary"},nativeOn:{click:function(e){return a.doExport()}}})],1)],1)],1),t("json-table",{ref:"myJsonTable",attrs:{"table-heads":a.tableHeads,loading:a.listLoading,"table-data":a.tableData,page:a.page},on:{"current-change":a.currentPageChange},scopedSlots:a._u([{key:"swreDbCreateTime",fn:function(e){return[t("span",[a._v(a._s(a._f("formatDate")(e.rowData.scope.row.swreDbCreateTime,"yyyy-MM-dd HH:mm:ss")))])]}},{key:"swreStatus",fn:function(e){return[0===e.rowData.scope.row.swreStatus?t("el-tag",[a._v("待审核")]):a._e(),1===e.rowData.scope.row.swreStatus?t("el-tag",{attrs:{type:"success"}},[a._v("通过")]):a._e(),2===e.rowData.scope.row.swreStatus?t("el-tag",{attrs:{type:"danger"}},[a._v("不通过")]):a._e()]}},{key:"swreAuditTime",fn:function(e){return[t("span",[a._v(a._s(a._f("formatDate")(e.rowData.scope.row.swreAuditTime,"yyyy-MM-dd HH:mm:ss")))])]}},{key:"warningDatabase",fn:function(e){return[t("el-popover",{attrs:{placement:"right",width:"400",trigger:"click"}},[t("el-form",[t("el-form-item",{attrs:{label:"分类"}},[null!=e.rowData.scope.row.warningDatabase&&1==e.rowData.scope.row.warningDatabase.wadbType?t("el-tag",[a._v("通用库")]):null!=e.rowData.scope.row.warningDatabase&&2==e.rowData.scope.row.warningDatabase.wadbType?t("el-tag",[a._v("特色库")]):null!=e.rowData.scope.row.warningDatabase&&3==e.rowData.scope.row.warningDatabase.wadbType?t("el-tag",[a._v("校规")]):null!=e.rowData.scope.row.warningDatabase&&4==e.rowData.scope.row.warningDatabase.wadbType?t("el-tag",[a._v("班规")]):t("el-tag",[a._v("未分类")])],1),t("el-form-item",{attrs:{label:"基础评分"}},[null!=e.rowData.scope.row.warningDatabase?t("span",[a._v(a._s(e.rowData.scope.row.warningDatabase.wadbBaseScore))]):t("span",[a._v(a._s(0))])]),t("el-form-item",{attrs:{label:"行为描述"}},[null!=e.rowData.scope.row.warningDatabase?t("span",[a._v(a._s(e.rowData.scope.row.warningDatabase.wadbSummary))]):a._e()]),t("el-form-item",{attrs:{label:"教育减分"}},[null!=e.rowData.scope.row.warningDatabase?t("span",[a._v(a._s(e.rowData.scope.row.warningDatabase.wadbTeachReduce))]):a._e()]),t("el-form-item",{attrs:{label:"家长告知教育管理建议"}},[null!=e.rowData.scope.row.warningDatabase?t("span",[a._v(a._s(e.rowData.scope.row.warningDatabase.wadbMsgParent))]):a._e()]),t("el-form-item",{attrs:{label:"教师教育管理建议"}},[null!=e.rowData.scope.row.warningDatabase?t("span",[a._v(a._s(e.rowData.scope.row.warningDatabase.wadbMsgTeacher))]):a._e()])],1),t("el-button",{attrs:{slot:"reference",size:"medium"},slot:"reference"},[a._v("查看")])],1)]}},{key:"swreCycleStatus",fn:function(e){return[1===e.rowData.scope.row.swreCycleStatus?t("el-tag",[a._v("最新周期")]):a._e(),0===e.rowData.scope.row.swreCycleStatus?t("el-tag",[a._v("历史周期")]):a._e()]}}])})],1)},o=[],s=t("5530"),n=(t("159b"),t("4303")),l=t("261a"),i=t("e101"),c=t("b775");function w(a){return Object(c["a"])({url:"/admin/studentWarningRecord/getWarningRecord",method:"post",data:a})}function p(a){return Object(c["a"])({url:"/admin/studentWarningRecord/exportExcel",method:"post",data:a})}var u={components:{JsonFilter:n["a"],JsonTable:l["a"],PermissionFilter:i["a"]},data:function(){return{titleCode:"recordWarning",tableHeads:[{prop:"swreBehaviorCode",label:"识别码"},{prop:"studentIdNumber",label:"学生编号"},{prop:"studentName",label:"学生姓名"},{slot:!0,prop:"swreDbCreateTime",label:"触发时间"},{slot:!0,prop:"swreStatus",label:"审核状态",width:120},{slot:!0,prop:"swreAuditTime",label:"审核时间"},{prop:"swreAuditUserName",label:"审核人"},{prop:"swreBehaviorDesc",label:"行为详细描述"},{prop:"notiOperatorName",label:"安全教育状态"},{slot:!0,prop:"swreCycleStatus",label:"评价周期",width:120},{slot:!0,prop:"warningDatabase",label:"预警信息"}],listLoading:!1,tableData:[],exportLoading:!1,param:{wadbSummaryIsLike:"",wadbNumberIsLike:"",wadbNumber:"",wadbDescIsLike:"",wadbType:""},page:{limit:15,current:1,total:15},dialogShow:!1,chooseEntity:null,categoryList:[{label:"通用库",value:"1"},{label:"特色库",value:"2"},{label:"校规",value:"3"},{label:"班规",value:"4"}]}},created:function(){this.getTableData()},methods:{getTableData:function(){var a=this;this.listLoading=!0,w(Object(s["a"])(Object(s["a"])({},this.param),{},{page:this.page.current,limit:this.page.limit})).then((function(e){if(a.listLoading=!1,e.success){var t=e.root,r=[];t.forEach((function(a){var e=Object(s["a"])(Object(s["a"])({},a),{},{studentIdNumber:a.student.studentIdNumber,studentName:a.student.studentName});r.push(e)})),a.tableData=r,a.page.total=e.totalSize}else a.tableData=[],a.page.total=0,a.$notify({title:"提示",message:e.failReasonShow||"未获取到数据",type:"warning"})}))},currentPageChange:function(a){this.page.current=a,this.getTableData()},doSearch:function(){this.page.current=1,this.getTableData()},doExport:function(){var a=this;this.exportLoading||(this.exportLoading=!0,p(Object(s["a"])({},this.param)).then((function(e){if(a.exportLoading=!1,e.success){var t=a.BASEURL;window.open(t+e.tip)}else a.$notify({title:"提示",message:e.failReasonShow||"Excel 导出错误！",type:"warning"})})))}}},b=u,d=t("2877"),m=Object(d["a"])(b,r,o,!1,null,"2fb0ff36",null);e["default"]=m.exports}}]);